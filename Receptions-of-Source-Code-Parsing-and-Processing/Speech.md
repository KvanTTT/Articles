# –¢–µ–æ—Ä–∏—è –∏ –ø—Ä–∞–∫—Ç–∏–∫–∞ —Ñ–æ—Ä–º–∞–ª—å–Ω—ã—Ö —è–∑—ã–∫–æ–≤

–ü—Ä–∏–≤–µ—Ç –≤—Å–µ–º! –ú–µ–Ω—è –∑–æ–≤—É—Ç –ò–≤–∞–Ω –ö–æ—á—É—Ä–∫–∏–Ω. –Ø —Ä–∞–±–æ—Ç–∞—é –≤ Positive Technologies
–Ω–∞–¥ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–º–∏ –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–∞–º–∏ –∏—Å—Ö–æ–¥–Ω—ã—Ö –∫–æ–¥–æ–≤ –∏ –ø–æ–¥—Ä–∞–±–∞—Ç—ã–≤–∞—é –≤ Swiftify,
–≤–µ–±-—Å–µ—Ä–≤–∏—Å–µ –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞ Objective-C –≤ Swift. –¢–∞–∫–∂–µ —è –≤–µ–¥—É
–∞–∫—Ç–∏–≤–Ω—É—é –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–∞ GitHub –ø–æ–¥ –Ω–∏–∫–æ–º KvanTTT –∏ –ø–∏—à—É —Å—Ç–∞—Ç—å–∏ –Ω–∞ —Ö–∞–±—Ä–µ –Ω–∞
—Ç–µ—Ö–Ω–∏—á–µ—Å–∫—É—é —Ç–µ–º–∞—Ç–∏–∫—É.

–í—Å—è –º–æ—è —Ä–∞–±–æ—Ç–∞ –∏ —Ö–æ–±–±–∏ —Ç–∞–∫ –∏–ª–∏ –∏–Ω–∞—á–µ —Å–≤—è–∑–∞–Ω—ã —Å –ø–∞—Ä—Å–∏–Ω–≥–æ–º –∫–∞–∫ –Ω–µ–±–æ–ª—å—à–∏—Ö –ø—Ä–µ–¥–º–µ—Ç–Ω–æ-
–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —è–∑—ã–∫–æ–≤ (—Ç.–µ. DSL), —Ç–∞–∫ –∏ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã—Ö —è–∑—ã–∫–æ–≤ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è.

–ù–∞–ø—Ä–∏–º–µ—Ä, –≤ Positive Technologies —è –∑–∞–Ω–∏–º–∞–ª—Å—è –∏ –∑–∞–Ω–∏–º–∞—é—Å—å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–æ–π —è–∑—ã–∫–∞ –æ–ø–∏—Å–∞–Ω–∏—è —à–∞–±–ª–æ–Ω–æ–≤,
–ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω—ã—Ö –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–æ–≤ –∏ —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π –≤ –∏—Å—Ö–æ–¥–Ω–æ–º –∫–æ–¥–µ.
–¢–∞–∫–∂–µ —è –∑–∞–Ω–∏–º–∞–ª—Å—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–æ–π –ø–∞—Ä—Å–µ—Ä–æ–≤ –¥–ª—è —è–∑—ã–∫–æ–≤ Java, PHP, PL/SQL, T-SQL –∏ Objective-C.

–í —ç—Ç–æ–º –¥–æ–∫–ª–∞–¥–µ —è —Ö–æ—Ç–µ–ª –±—ã —Ä–∞—Å—Å–∫–∞–∑–∞—Ç—å –æ –±–∞–∑–æ–≤—ã—Ö –ø–æ–Ω—è—Ç–∏—è—Ö –ø–∞—Ä—Å–∏–Ω–≥–∞, –æ —Ç–æ–º, –∫–∞–∫–∏–µ
–±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –ø–æ–¥ –ø–ª–∞—Ç—Ñ–æ—Ä–º—É .NET –∏ —è–∑—ã–∫ C#. –ê –ø–æ—Ç–æ–º —è —Ö–æ—Ç–µ–ª –±—ã
—É–≥–ª—É–±–∏—Ç—å—Å—è –≤ –ø—Ä–æ–±–ª–µ–º—ã –ø–∞—Ä—Å–∏–Ω–≥–∞ –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ –∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏–∏ —Ç–∞–∫–∏—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –∫–∞–∫
ANTLR –∏ Roslyn. –í –∑–∞–≤–µ—Ä—à–∞—é—â–µ–π —á–∞—Å—Ç–∏ –¥–æ–∫–ª–∞–¥–∞ —è –∫–æ—Å–Ω—É—Å—å —Ç–µ–º—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
–ø–∞—Ä—Å–∏–Ω–≥–∞, —Ç.–µ. –¥–µ—Ä–µ–≤—å–µ–≤ —Ä–∞–∑–±–æ—Ä–∞.

–°—Ä–∞–∑—É –ø—Ä–µ–¥—É–ø—Ä–µ–∂—É, —á—Ç–æ –¥–æ–∫–ª–∞–¥ –Ω–µ —Å–æ–≤—Å–µ–º —Å–≤—è–∑–∞–Ω —Å .NET, –æ–¥–Ω–∞–∫–æ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏
–≤–µ—Å—å –º–∞—Ç–µ—Ä–∏–∞–ª –Ω–æ—Å–∏—Ç –ø—Ä–∏–∫–ª–∞–¥–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ –≤ –æ—Ç–∫—Ä—ã—Ç—ã—Ö, —Ç–∞–∫ –∏ –≤
–∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö. –ë–æ–ª–µ–µ —Ç–æ–≥–æ, –±–æ–ª—å—à—É—é —á–∞—Å—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª–∞ –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –Ω–∞ –≥–∏—Ç—Ö–∞–±–µ!

# –ü–æ—á–µ–º—É –Ω–µ Regex?

–ò—Ç–∞–∫, –Ω–∞—á–Ω–µ–º —Å–æ –≤—Å–µ–º–∏ –∏–∑–≤–µ—Å—Ç–Ω—ã–º–∏ –∏ –ª—é–±–∏–º—ã–º–∏ —Ä–µ–≥—É–ª—è—Ä–Ω—ã–º–∏ –≤—ã—Ä–∞–∂–µ–Ω–∏—è–º–∏. –ü–æ—á–µ–º—É –∏—Ö
–Ω–µ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ –≤—Å–µ–≥–æ? –Ø –¥—É–º–∞—é –±–æ–ª—å—à–∞—è —á–∞—Å—Ç—å –∞—É–¥–∏—Ç–æ—Ä–∏–∏ —Ç–∞–∫ –∏–ª–∏ –∏–Ω–∞—á–µ
–¥–æ–≥–∞–¥—ã–≤–∞—é—Ç—Å—è. –ò, –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —Ç–æ, —á—Ç–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä–µ–≥—É–ª—è—Ä–∫–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä –≤ C#, –æ–±–ª–∞–¥–∞—é—Ç
–º–æ—â–Ω–æ—Å—Ç—å—é –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã—Ö —è–∑—ã–∫–æ–≤, —Ç.–µ. –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ-—Å–≤–æ–±–æ–¥–Ω—ã—Ö, –æ–ø–∏—Å—ã–≤–∞—Ç—å –∏–º–∏
–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ —ç—Ç–∞–ø–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –æ—á–µ–Ω—å —Å–ª–æ–∂–Ω–æ.

–†–∞—Å—Å–º–æ—Ç—Ä–∏–º —Ç–∞–∫—É—é —Ä–µ–≥—É–ª—è—Ä–∫—É —Å –æ—Ç–∫—Ä—ã–≤–∞—é—â–∏–º –∏ –∑–∞–∫—Ä—ã–≤–∞—é—â–∏–º —Ç–µ–≥–æ–º table: `<table>(.*?)</table>`.
–î–∞–Ω–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –ø–∞—Ä—Å–∏—Ç –Ω–µ –∂–∞–¥–Ω–æ —Ç–µ–∫—Å—Ç –¥–æ –∑–∞–∫—Ä—ã–≤–∞—é—â–µ–≥–æ—Å—è —Ç–µ–≥–∞ `</table>`.
–û–∫, –≤—Å–µ —Ö–æ—Ä–æ—à–æ, –≤—Å–µ –¥–æ–≤–æ–ª—å–Ω—ã. –ê —á—Ç–æ, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –µ—â–µ –∏ –æ–±—Ä–∞–±–æ—Ç–∫—É –∞—Ç—Ç—Ä–∏–±—É—Ç–æ–≤?
–û–∫, –Ω–µ—Ç –ø—Ä–æ–±–ª–µ–º –∏—Å–ø–æ–ª—å–∑—É–µ–º –∏–∑ –ø—É–Ω–∫—Ç–∞ 2: `<table.*?>(.*?)</table>`. –ê —á—Ç–æ –µ—Å–ª–∏ –¥–∞–ª—å—à–µ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å
–ø–æ–¥–¥–µ—Ä–∂–∫—É —ç–ª–µ–º–µ–Ω—Ç–æ–≤ `<tr>` –∏ `<td>`, –∫–æ—Ç–æ—Ä—ã–µ –≤–Ω—É—Ç—Ä–∏ —Å–µ–±—è —Ç–∞–∫–∂–µ –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å
–∫—É—á—É —Ç–µ–≥–æ–≤? –ò–ª–∏, –¥–æ–ø—É—Å—Ç–∏–º, –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ `<!-- html comment -->`.
–ü–æ—Å–ª–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ —ç—Ç–∞–ø–∞ –≤–∞–º –Ω–µ –∑–∞—Ö–æ—á–µ—Ç—Å—è –≤–Ω–æ—Å–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —ç—Ç–æ —Å–ª–æ–∂–Ω–æ–µ
—Ä–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ, –∏ –≤—ã –ø–æ–π–º–µ—Ç–µ, —á—Ç–æ –∑–¥–µ—Å—å —á—Ç–æ-—Ç–æ –Ω–µ —Ç–∞–∫ :)

–ö—Å—Ç–∞—Ç–∏, —Ç–æ –∂–µ —Å–∞–º–æ–µ –∫–∞—Å–∞–µ—Ç—Å—è –∏ –ø–∞—Ä—Å–∏–Ω–≥–∞ –ª—é–±—ã—Ö —è–∑—ã–∫–æ–≤, –≤ –∫–æ—Ç–æ—Ä–æ–º –µ—Å—Ç—å –≤–ª–æ–∂–µ–Ω–Ω—ã–µ
—ç–ª–µ–º–µ–Ω—Ç—ã, –Ω–∞–ø—Ä–∏–º–µ—Ä –ø—Ä–æ—Å—Ç–µ–π—à–∏–µ –±–ª–æ–∫–∏ –∏–∑ —Ñ–∏–≥—É—Ä–Ω—ã—Ö —Å–∫–æ–±–æ–∫ –≤ C#.

# –õ–µ–∫—Å–µ–º—ã –∏ —Ç–æ–∫–µ–Ω—ã

–ù—É –æ–∫, –ø–æ–ø—Ä–æ–±—É–µ–º –ø—Ä–∏–¥—É–º–∞—Ç—å —Å–ø–æ—Å–æ–± –∫–∞–∫ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å —Ö–æ—Ç—è –±—ã –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ html.
<!-- –°–ø—Ä–æ—Å–∏—Ç—å —É –∑–∞–ª–∞--> –ö–∞–∫ –∏–∑–≤–µ—Å—Ç–Ω–æ, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è –∏ –∑–∞–∫–∞–Ω—á–∏–≤–∞—é—Ç—Å—è
–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º–∏ –º–∞—Ä–∫–µ—Ä–∞–º–∏ –∏–ª–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é —Å–∏–º–≤–æ–ª–æ–≤. –¢–∞–∫ –∑–Ω–∞—á–∏—Ç
–º–æ–∂–Ω–æ –∑–∞—Ä–∞–Ω–µ–µ –¥–µ—Ç–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—Å—Ç –∑–∞–∫–ª—é—á–µ–Ω–Ω—ã–π –≤ —Ç–∞–∫–∏–µ –º–∞—Ä–∫–µ—Ä—ã, —É–¥–∞–ª—è—Ç—å –µ–≥–æ –∏–ª–∏
–ø–æ–º–µ—â–∞—Ç—å –∫—É–¥–∞-—Ç–æ –≤ –¥—Ä—É–≥–æ–µ –º–µ—Å—Ç–æ –∏ –ø–∞—Ä—Å–∏—Ç—å –¥–∞–ª—å—à–µ –∫–∞–∫ –Ω–∏ –≤ —á–µ–º –Ω–µ –±—ã–≤–∞–ª–æ!
–ö—Ä—É—Ç–æ, –Ω–æ –ø–æ–ª—É—á–∞–µ—Ç—Å—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤ –¥–≤–∞ –ø—Ä–æ—Ö–æ–¥–∞. –ê —á—Ç–æ, –µ—Å–ª–∏ —Å–¥–µ–ª–∞—Ç—å —ç—Ç–æ –≤ –æ–¥–∏–Ω
–ø—Ä–æ—Ö–æ–¥ –∏ —Å—Ä–∞–∑—É —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä–∫–∏ –¥–ª—è —Ç–∞–∫–∏—Ö –≤–æ—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π,
–ø—Ä–∏ —ç—Ç–æ–º –Ω–∞–∑–Ω–∞—á–∞—è —Ç–∏–ø –¥–ª—è –∫–∞–∂–¥–æ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –Ω–∞ —ç—Ç–æ–º –∂–µ –ø—Ä–æ—Ö–æ–¥–µ! –ê –ø–æ–º–∏–º–æ
–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ —Ç–∞–∫ –∂–µ –º–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –ø—Ä–æ–±–µ–ª—ã, —á–∏—Å–ª–∞, –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã, —Å—Ç—Ä–æ–∫–∏ –∏ –¥—Ä—É–≥–∏–µ
—Ç–∏–ø—ã.

–¢–æ–∂–µ –≤–ø–æ–ª–Ω–µ —Å–µ–±–µ –ø–æ–¥—Ö–æ–¥. –ë–æ–ª–µ–µ —Ç–æ–≥–æ, –¥–ª—è —Ç–∞–∫–∏—Ö –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π –¥–∞–∂–µ
—Å—É—â–µ—Å—Ç–≤—É—é—Ç –æ–±—â–µ–ø—Ä–∏–Ω—è—Ç—ã–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è. **–¢–æ–∫–µ–Ω–æ–º** –æ–±–æ–∑–Ω–∞—á–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å
–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤ –∏ –∏—Ö —Ç–∏–ø. –°–∞–º—É —ç—Ç—É –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ–±—ã—á–Ω–æ –Ω–∞–∑—ã–≤–∞—é—Ç
**–ª–µ–∫—Å–µ–º–æ–π**. <!-- –ë–æ–ª–µ–µ —Ç–æ–≥–æ, —Å–∞–º–∏ —Ç–∏–ø—ã —Ç–æ–∫–µ–Ω–æ–≤ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –∫–æ–Ω–µ—á–Ω–æ–º –∞–≤—Ç–æ–º–∞—Ç–µ. -->
–ü—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–≤ –∏–∑ —Ç–µ–∫—Å—Ç–∞ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è **—Ç–æ–∫–µ–Ω–∏–∑–∞—Ü–∏–µ–π**.

–î–ª—è –æ–ø–∏—Å–∞–Ω–∏—è —Ç–æ–∫–µ–Ω–∏–∑–∞—Ç–æ—Ä–æ–≤ —Å—É—â–µ—Å—Ç–≤—É—é—Ç —Å–≤–æ–∏ —è–∑—ã–∫–∏ –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã. –û–±—ã—á–Ω–æ –∫–∞–∂–¥—ã–π
—Ç–æ–∫–µ–Ω –æ–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–µ: —Å–ª–µ–≤–∞ –ø—Ä–æ–ø–∏—Å–∞–Ω –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä, –∞ —Å–ø—Ä–∞–≤–∞ -
–µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–ª–∏ –ª–µ–∫—Å–µ–º–∞. –ù–∞ —ç—Ç–æ–º —Å–ª–∞–π–¥–µ –ø—Ä–∏–≤–µ–¥–µ–Ω –ø—Ä–æ—Å—Ç–µ–π—à–∏–π –ø—Ä–∏–º–µ—Ä:

```ANTLR
MyKeyword: `var`;
Id:        [a-z]+;
Digit:     [0-9]+;
```

# –î–µ—Ä–µ–≤–æ —Ä–∞–∑–±–æ—Ä–∞ –∏ AST

–û–¥–Ω–∞–∫–æ –Ω–∞—à–∞ –ø—Ä–æ–±–ª–µ–º–∞ —Å regex —Ä–µ—à–µ–Ω–∞ –Ω–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é! –°–æ —Å–∫—Ä—ã—Ç—ã–º–∏ —Å–∏–º–≤–æ–ª–∞–º–∏ —Ä–∞–∑–æ–±—Ä–∞–ª–∏—Å—å,
–Ω–æ –∫–∞–∫ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –≤–ª–æ–∂–µ–Ω–Ω—ã–µ —Ç–µ–≥–∏? –í–µ–¥—å —Ç–æ–∫–µ–Ω–∏–∑–∞—Ç–æ—Ä –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ—Ç–æ–∫ —Ç–æ–∫–µ–Ω–æ–≤,
–∞ —É –Ω–∞—Å —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞!

<!-- TODO: –≤–æ–∑–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Ñ—Ä–∞–≥–º–µ–Ω—Ç –∫–æ–¥–∞ —Å —Ä–µ–∫—É—Ä—Å–∏–µ–π -->

–ò–ª–∏ –∫–∞–∫ —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É, –µ—Å–ª–∏ –µ–µ –¥–∞–ª—å–Ω–µ–π—à–∏–π –ø–∞—Ä—Å–∏–Ω–≥ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–∏–ø–∞ –ø–µ—Ä–≤–æ–≥–æ —Ç–æ–∫–µ–Ω–∞?
–¢–∞–∫ –≤–æ—Ç, –¥–ª—è —Ç–∞–∫–∏—Ö —Å–ª—É—á–∞–µ–≤ –∏ –±—ã–ª–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω—ã —Ä–∞–∑–Ω—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã –∏ –ø—Ä–∞–∫—Ç–∏–∫–∏.
–ï—Å–ª–∏ –ø–æ—Ç–æ–∫ —Ç–æ–∫–µ–Ω–æ–≤ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –ª–∏–Ω–µ–π–Ω—É—é –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å, —Ç–æ
—Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —É–∂–µ –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–µ: —ç—Ç–æ –¥–µ—Ä–µ–≤—å—è, –∞ –∏–º–µ–Ω–Ω–æ
–∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–π —Å–ø–∏—Å–æ–∫ —É–∑–ª–æ–≤, –∫–∞–∂–¥—ã–π –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö —Å–æ–¥–µ—Ä–∂–∏—Ç –≤ —Å–µ–±–µ –¥–æ—á–µ—Ä–Ω–∏–µ —É–∑–ª—ã –∏–ª–∏ –¥–µ—Ç–∏.
–¢–∞–∫–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –Ω–∞–∑—ã–≤–∞—é—Ç—Å—è **–¥–µ—Ä–µ–≤—å—è–º–∏ —Ä–∞–∑–±–æ—Ä–∞** –∏–ª–∏ **–∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ –¥–µ—Ä–µ–≤—å—è–º–∏ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞** (**CST**).

–ù–µ–∫–æ—Ç–æ—Ä—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –≤ —è–∑—ã–∫–µ –≤ –ø—Ä–∏–Ω—Ü–∏–ø–µ –Ω—É–∂–Ω—ã —Ç–æ–ª—å–∫–æ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞
–∏ –Ω–∏–∫–∞–∫ –Ω–µ –≤–ª–∏—è—é—Ç –Ω–∞ –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–¥–∞–µ—Ç –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä —è–∑—ã–∫–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç–æ—á–∫–∞ —Å
–∑–∞–ø—è—Ç–æ–π –≤ C#. –ë–µ–∑ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –∏ –ø—Ä–æ–±–µ–ª–æ–≤, –ø–æ–Ω—è—Ç–Ω–æ–µ –¥–µ–ª–æ, —Ç–æ–∂–µ –º–æ–∂–Ω–æ –æ–±–æ–π—Ç–∏—Å—å.
–¢–∞–∫ –≤–æ—Ç, *–¥–µ—Ä–µ–≤–æ —Ä–∞–∑–±–æ—Ä–∞*, –∫–æ—Ç–æ—Ä–æ–µ –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ —Ç–∞–∫–∏–µ –Ω–µ –∑–Ω–∞—á–∏–º—ã–µ —Ç–æ–∫–µ–Ω—ã,
–Ω–∞–∑—ã–≤–∞—é—Ç –≤–µ–ª–∏–∫–∏–º –∏ —É–∂–∞—Å–Ω—ã–º **–∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–º —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–º –¥–µ—Ä–µ–≤–æ–º** –∏–ª–∏ **AST**.

–ü—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è –¥–µ—Ä–µ–≤—å–µ–≤ —Ä–∞–∑–±–æ—Ä–∞ –∏–∑ –ø–æ—Ç–æ–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø–∞—Ä—Å–∏–Ω–≥–æ–º.
–°—Ç–æ–∏—Ç –æ—Ç–º–µ—Ç–∏—Ç—å, —á—Ç–æ –ø–∞—Ä—Å–µ—Ä—ã –±—ã–≤–∞—é—Ç –∫–∞–∫ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–º–∏, –ø—Ä–∏–Ω–∏–º–∞—é—â–∏–º–∏ –Ω–∞ –≤—Ö–æ–¥
–ø–æ—Ç–æ–∫ —Ç–æ–∫–µ–Ω–æ–≤, —Ç–∞–∫ –∏ **–±–µ–∑–ª–µ–∫—Å–µ—Ä–Ω—ã–º–∏**, –ø—Ä–∏–Ω–∏–º–∞—é—â–∏–µ –Ω–∞ –≤—Ö–æ–¥ —Å—ã—Ä–æ–π –∏—Å—Ö–æ–¥–Ω–∏–∫.
–î–æ—Å—Ç–æ–∏–Ω—Å—Ç–≤–æ–º –ø–µ—Ä–≤—ã—Ö —è–≤–ª—è–µ—Ç—Å—è –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã, –∞ –≤—Ç–æ—Ä—ã—Ö - –≥–∏–±–∫–æ—Å—Ç—å.

# –¢–∏–ø—ã –ø–∞—Ä—Å–µ—Ä–æ–≤

–ü–∞—Ä—Å–µ—Ä—ã –±—ã–≤–∞—é—Ç –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ç–∏–ø–æ–≤:

* –ì–æ—Ç–æ–≤—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞
* –ü–∞—Ä—Å–µ—Ä—ã, –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–µ –≤—Ä—É—á–Ω—É—é
* –ò –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–∞—Ä—Å–µ—Ä—ã –∏–∑ –≥—Ä–∞–º–º–∞—Ç–∏–∫

–ì–æ—Ç–æ–≤—ã–º–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞–º–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞ —è–≤–ª—è—é—Ç—Å—è, –Ω–∞–ø—Ä–∏–º–µ—Ä, –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –¥–≤–∏–∂–æ–∫ —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π,
–ø–∞—Ä—Å–µ—Ä XML –∏ –≤–Ω–µ—à–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä —Ö–æ—Ä–æ—à–æ –∏–∑–≤–µ—Å—Ç–Ω–∞—è JSON.NET, ServiceStack –∏ –¥—Ä—É–≥–∏–µ.
–ò—Ö –¥–æ—Å—Ç–æ–∏–Ω—Å—Ç–≤–∞–º–∏ —è–≤–ª—è—é—Ç—Å—è —Ö–æ—Ä–æ—à–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ, –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, —Ç.–∫. –æ–Ω–∏
–Ω–∞–ø–∏—Å–∞–Ω—ã –¥–ª—è —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤, –æ–ø–µ–Ω—Å–æ—Ä—Å–Ω—ã–µ –∏ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ–µ
–≤—Ä–µ–º—è. –¢–∞–∫–∂–µ –æ–Ω–∏ –∏–º–µ—é—Ç –æ–±—à–∏—Ä–Ω—ã–π API, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–æ–ø–∏—Å—ã–≤–∞—Ç—å
–ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—É—é –ª–æ–≥–∏–∫—É –¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–ª—è –∫–∞–∫–∏—Ö-—Ç–æ —Å–ª–æ–∂–Ω—ã—Ö –¥—Ä–µ–≤–æ–≤–∏–¥–Ω—ã—Ö –∏–ª–∏ –≥—Ä–∞—Ñ–æ–≤—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä.
–û–¥–Ω–∞–∫–æ —Ç–∞–∫–∏–µ –ø–∞—Ä—Å–µ—Ä—ã –Ω–µ –ø–æ–ª—É—á–∏—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –¥—Ä—É–≥–∏—Ö —è–∑—ã–∫–æ–≤,
–∞ —Ç–µ–º –±–æ–ª–µ–µ —Å–≤–æ–∏—Ö –ø—Ä–µ–¥–º–µ—Ç–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∏–ª–∏ **DSL** (Domain Specific Language).

–í—Ç–æ—Ä—ã–º —Ç–∏–ø–æ–º —è–≤–ª—è—é—Ç—Å—è –ø–∞—Ä—Å–µ—Ä—ã, –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≤—Ä—É—á–Ω—É—é. –¢–∞–∫–∏–µ –ø–∞—Ä—Å–µ—Ä—ã
–Ω–∞–∏–±–æ–ª–µ–µ –≥–∏–±–∫–∏–µ –≤ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è—Ö –∏ –∏–º–µ—é—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å.
–û–¥–Ω–∞–∫–æ —Ç—Ä–µ–±—É–µ—Ç—Å—è –±–æ–ª—å—à–æ–µ –ø–æ–≥—Ä—É–∂–µ–Ω–∏–µ –≤ –ø—Ä–µ–¥–º–µ—Ç–Ω—É—é –æ–±–ª–∞—Å—Ç—å.
–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Ç–∞–∫–∏—Ö –ø–∞—Ä—Å–µ—Ä–æ–≤ –æ—á–µ–Ω—å –¥–æ–ª–≥–∞—è –∏ –∑–∞–Ω–∏–º–∞–µ—Ç –º–Ω–æ–≥–æ-–º–Ω–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–æ—á–∞—Å–æ–≤.
–ü—Ä–∏–º–µ—Ä–æ–º —Ç–∞–∫–∏—Ö –ø–∞—Ä—Å–µ—Ä–æ–≤ –ø–æ–¥ C# —è–≤–ª—è—é—Ç—Å—è Roslyn. –ù–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –æ–Ω –Ω–µ –ø—Ä–æ—Å—Ç–æ –ø–∞—Ä—Å–µ—Ä,
–∞ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞, –∞–Ω–∞–ª–∏–∑–∞ –∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ C# –∏ VB –∫–æ–¥–∞.
–û–¥–Ω–∞–∫–æ –¥–∞–∂–µ —Ç–∞–∫–æ–π –º–æ—â–Ω—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –∑–∞—Ç–æ—á–µ–Ω —Ç–æ–ª—å–∫–æ –Ω–∞ –¥–≤–∞ —è–∑—ã–∫–∞, –æ–Ω –Ω–µ —Å–º–æ–∂–µ—Ç
–ø–∞—Ä—Å–∏—Ç—å –ª—é–±—ã–µ –Ω—É–∂–Ω—ã–µ –Ω–∞–º —è–∑—ã–∫–∏, –¥–∞ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ–Ω —Ç–æ–ª—å–∫–æ –ø–æ–¥ .NET.

–ü–æ—ç—Ç–æ–º—É –Ω–∞ –ø–æ–º–æ—â—å –ø—Ä–∏—Ö–æ–¥—è—Ç —Ç–∞–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã, –∫–∞–∫ **–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã –ø–∞—Ä—Å–µ—Ä–æ–≤** –∏–ª–∏
**–∫–æ–º–ø–∏–ª—è—Ç–æ—Ä—ã –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–æ–≤**. –° –ø–æ–º–æ—â—å—é –Ω–∏—Ö –º–æ–∂–Ω–æ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ä—Å–µ—Ä—ã —Å—Ä–∞–∑—É
–ø–æ–¥ –Ω–µ—Å–∫–æ–ª—å–∫–æ —è–∑—ã–∫–æ–≤ (–∏–ª–∏ —Ä–∞–Ω—Ç–∞–π–º–æ–≤) –∏–º–µ—è —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ –æ–ø–∏—Å–∞–Ω–∏–µ —è–∑—ã–∫–∞, –∫–æ—Ç–æ—Ä–æ–µ
–Ω–∞–∑—ã–≤–∞–µ—Ç **–≥—Ä–∞–º–º–∞—Ç–∏–∫–æ–π**. –¢–∞–∫–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–∞—Ä—Å–µ—Ä–æ–≤ –≤
—Ä–∞–Ω—Ç–∞–π–º–µ, –∞ –Ω–µ –Ω–∞ —ç—Ç–∞–ø–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏. –û–Ω–∏ –Ω–∞–∑—ã–≤–∞—é—Ç—Å—è **–∫–æ–º–±–∏–Ω–∞—Ç–æ—Ä–∞–º–∏ –ø–∞—Ä—Å–µ—Ä–æ–≤**.

# –ì—Ä–∞–º–º–∞—Ç–∏–∫–∞

–í –≥—Ä–∞–º–º–∞—Ç–∏–∫–µ –æ–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞–±–æ—Ä **–ø—Ä–∞–≤–∏–ª**, –∫–∞–∂–¥–æ–µ –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç
—É–∑–µ–ª –≤ –¥–µ—Ä–µ–≤–∞ —Ä–∞–∑–±–æ—Ä–∞. –ü—Ä–∞–≤–∏–ª–æ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö **–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤**.
–ù–∞ —ç—Ç–æ–º —Å–ª–∞–π–¥–µ –ø—Ä–∏–≤–µ–¥–µ–Ω –ø—Ä–æ—Å—Ç–µ–π—à–∏–π –ø—Ä–∏–º–µ—Ä: –≤ –Ω–µ–º –æ–ø–∏—Å–∞–Ω–æ
–ø—Ä–∞–≤–∏–ª–æ expression –¥–ª—è —É–º–Ω–æ–∂–µ–Ω–∏—è, —Å–ª–æ–∂–µ–Ω–∏—è, –≤—ã–∑–æ–≤–∞ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞.
–¢.–µ. —Å–æ–¥–µ—Ä–∂–∏—Ç 4 –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã –∏ –±—É–¥–µ—Ç –ø–∞—Ä—Å–∏—Ç—å —Ç–µ–∫—Å—Ç `a + b * c` –ø—Ä–∏—á–µ–º —Å
—Å–æ–±–ª—é–¥–µ–Ω–∏–µ–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤ –æ–ø–µ—Ä–∞—Ü–∏–π: —Å–Ω–∞—á–∞–ª–∞ —É–º–Ω–æ–∂–µ–Ω–∏–µ, –∞ –ø–æ—Ç–æ–º - —Å–ª–æ–∂–µ–Ω–∏–µ.

```ANTLR
expr
    : expr '*' expr
    | expr '+' expr
    | ID '(' args ')'
    | ID
    ;

ID: [a-zA-Z]+;
```

–°—Ç–æ–∏—Ç –æ—Ç–º–µ—Ç–∏—Ç—å, —á—Ç–æ –ø—Ä–∞–≤–∏–ª–æ `expr` –∑–¥–µ—Å—å —Å—Å—ã–ª–∞–µ—Ç—Å—è —Å–∞–º–æ –Ω–∞ —Å–µ–±—è –≤ –¥–≤—É—Ö
–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞—Ö. –¢–∞–∫–∏–µ –ø—Ä–∞–≤–∏–ª–∞ –Ω–∞–∑—ã–≤–∞—é—Ç—Å—è **–ª–µ–≤–æ-—Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã–º–∏** –∏ –Ω–µ –≤—Å–µ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã
–ø–∞—Ä—Å–µ—Ä–æ–≤ —Å–ø–æ—Å–æ–±—ã —Å–ø—Ä–∞–≤–ª—è—Ç—å—Å—è —Å –Ω–∏–º–∏, –ø–æ—ç—Ç–æ–º—É –∏—Ö –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞—Ç—å
–∏—Ö –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º –æ–±—Ä–∞–∑–æ–º. –ù–æ –ø—Ä–µ–∂–¥–µ —á–µ–º —è —Ä–∞—Å—Å–∫–∞–∂—É –æ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫–∞—Ö
–ø–∞—Ä—Å–∏–Ω–≥–∞ –Ω–∞ C#, —è –æ–ø–∏—à—É —Ç–∏–ø—ã —è–∑—ã–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –æ–Ω–∏ –º–æ–≥—É—Ç –ø–æ–∫—Ä—ã–≤–∞—Ç—å.

---

# –¢–∏–ø—ã —è–∑—ã–∫–æ–≤

–í–æ–æ–±—â–µ –≥–æ–≤–æ—Ä—è, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Å–∏—Å—Ç–µ–º–∞ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ —è–∑—ã–∫–æ–≤, –∫–æ—Ç–æ—Ä–∞—è –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è
**–∏–µ—Ä–∞—Ä—Ö–∏–µ–π –•–æ–º—Å–∫–æ–≥–æ**. –£–ø—Ä–æ—â–µ–Ω–Ω–æ –æ–Ω–∞ –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫ –∏ –Ω–∞—à–∏ –ª—é–±–∏–º—ã–µ —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ
–≤—ã—Ä–∞–∂–µ–Ω–∏—è –ø–æ –Ω–µ–π –æ–±–ª–∞–¥–∞—é—Ç –Ω–∞–∏–º–µ–Ω—å—à–µ–π –≤—ã—Ä–∞–∑–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é, –∞ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏
–≤–µ—Å—å —Å–∏–Ω—Ç–∞–∫—Å–∏—Å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —è–∑—ã–∫–æ–≤ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –º–æ–∂–Ω–æ –æ–ø–∏—Å–∞—Ç—å —Å –ø–æ–º–æ—â—å—é
**–∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ-–∑–∞–≤–∏—Å–∏–º—ã—Ö** –≥—Ä–∞–º–º–∞—Ç–∏–∫.

* –†–µ–≥—É–ª—è—Ä–Ω—ã–µ
* –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ-—Å–≤–æ–±–æ–¥–Ω—ã–µ
* –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ-–∑–∞–≤–∏—Å–∏–º—ã–µ
* –¢—å—é—Ä–∏–Ω–≥-–ø–æ–ª–Ω—ã–µ

–ï—Å–ª–∏ —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å –ø–∞—Ä—Å–µ—Ä—ã –ö–°-—è–∑—ã–∫–æ–≤ –∏ —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π ¬´–Ω–∞ –ø–∞–ª—å—Ü–∞—Ö¬ª,
—Ç–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –Ω–µ –∏–º–µ—é—Ç –ø–∞–º—è—Ç–∏, —Ç–æ—á–Ω–µ–µ –º–æ–≥—É—Ç –∑–∞–ø–æ–º–∏–Ω–∞—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ.
–ê –µ—Å–ª–∏ —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å –ø–∞—Ä—Å–µ—Ä—ã –ö–ó- –∏ –ö–°-—è–∑—ã–∫–æ–≤, —Ç–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –Ω–µ –∑–∞–ø–æ–º–∏–Ω–∞—é—Ç –∑–Ω–∞—á–µ–Ω–∏—è
(–Ω–µ —Ç–∏–ø—ã) –ø–æ—Å–µ—â–µ–Ω–Ω—ã—Ö —Ä–∞–Ω–µ–µ —Ç–æ–∫–µ–Ω–æ–≤, —Ç.–µ –ª–µ–∫—Å–µ–º.

–ö—Ä–æ–º–µ —Ç–æ–≥–æ, —è–∑—ã–∫ –≤ –æ–¥–Ω–æ–º —Å–ª—É—á–∞–µ –º–æ–∂–µ—Ç —è–≤–ª—è—Ç—å—Å—è –ö–°, –∞ –≤ –¥—Ä—É–≥–æ–º ‚Äî –ö–ó.
–ï—Å–ª–∏ —É—á–∏—Ç—ã–≤–∞—Ç—å **—Å–µ–º–∞–Ω—Ç–∏–∫—É**, —Ç.–µ. —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è–º–∏ —è–∑—ã–∫–∞,
–≤ —á–∞—Å—Ç–Ω–æ—Å—Ç–∏, —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å —Ç–∏–ø–æ–≤, —Ç–æ —è–∑—ã–∫ –º–æ–∂–µ—Ç —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å—Å—è –∫–∞–∫ –ö–ó.

<!-- TODO: –Ω–µ –æ—á–µ–Ω—å –ø–æ–Ω—è—Ç–Ω–æ -->

---

# –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –ø–æ–¥ C#

–ü–æ–¥ C# —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –æ–±—à–∏—Ä–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∏–±–ª–∏–æ—Ç–µ–∫ –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞, –æ—Ö–≤–∞—Ç—ã–≤–∞—é—â–∏–µ
–∫–∞–∫ —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ, —Ç–∞–∫ –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ-—Å–≤–æ–±–æ–¥–Ω—ã–µ —è–∑—ã–∫–∏, —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –ª–µ–≤–æ–π —Ä–µ–∫—É—Ä—Å–∏–∏–∏
–∏ –±–µ–∑, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–µ –ª–µ–∫—Å–µ—Ä –∏ –Ω–µ—Ç, –∞ —Ç–∞–∫–∂–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—â–∏–µ —Å—Ä–µ–¥—Å—Ç–≤–∞ –∞–Ω–∞–ª–∏–∑–∞ –∫–æ–¥–∞.

Nitra, JetBrains MPS –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç —Å–æ–±–æ–π —è–∑—ã–∫–æ–≤—ã–µ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏, –µ—â–µ –Ω–∞–∑—ã–≤–∞—é—Ç Language Workbench).
–ò—Ö –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è, —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —è–∑—ã–∫–æ–≤, –æ–ø–∏—Å–∞–Ω–∏—è —Å–µ–º–∞–Ω—Ç–∏–∫–∏,
–∫–æ–¥–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —è–∑—ã–∫–∞ —Å IDE –∏ –¥—Ä—É–≥–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤. –í –æ–±—â–µ–º —ç–¥–∞–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ
"–≤—Å–µ –∏–∑ –∫–æ—Ä–æ–±–∫–∏". –ù—É –∏ Roslyn —Ç—É–¥–∞ –∂–µ.

–ü–æ–¥—Ä–æ–±–Ω–æ —è –æ–± –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ö —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞—Ç—å –Ω–µ –±—É–¥—É, —Ä–∞–∑–≤–µ —á—Ç–æ –∫–æ—Å–Ω—É—Å—å
–∫–æ–º–±–∏–Ω–∞—Ç–æ—Ä–æ–≤. –û–¥–Ω–∞–∫–æ –≤—Å–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–µ—Ç–∞–ª—å–Ω–æ —Ä–∞—Å–ø–∏—Å–∞–Ω—ã –≤ –Ω–µ–¥–∞–≤–Ω–µ–π —Å—Ç–∞—Ç—å–µ
[Parsing In C#: Tools And Libraries](https://tomassetti.me/parsing-in-csharp).

# –ü–∞—Ä—Å–µ—Ä-–∫–æ–º–±–∏–Ω–∞—Ç–æ—Ä—ã

–ö–∞–∫ —è —É–∂–µ —É–ø–æ–º–∏–Ω–∞–ª, –∫–æ–º–±–∏–Ω–∞—Ç–æ—Ä—ã –ø–∞—Ä—Å–µ—Ä–æ–≤ –≤—Å—Ç—Ä–æ–µ–Ω—ã –≤ —è–∑—ã–∫, –∞ –∑–Ω–∞—á–∏—Ç –Ω–∏–∫–∞–∫–∞—è
–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–µ –Ω—É–∂–Ω–∞. –í –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å–ª—É—á–∞—è—Ö —ç—Ç–æ –Ω–µ–º–Ω–æ–≥–æ —É–ø—Ä–æ—â–∞–µ—Ç —Ä–∞–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å—Å, —Ç.–∫.
–æ—Ç–ø–∞–¥–∞–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –µ–≥–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏—è. –¢–∞–∫–∂–µ –∫–æ–º–±–∏–Ω–∞—Ç–æ—Ä—ã –º–æ–≥—É—Ç –±—ã—Ç—å
–∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã —Å IDE —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞. –ù–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ –æ–Ω–∏ –ø–æ–ª–µ–∑–Ω—ã –¥–ª—è –º–µ–ª–∫–∏—Ö –∑–∞–¥–∞—á–µ–∫
–ø–∞—Ä—Å–∏–Ω–≥–∞, —á—É—Ç—å —Å–ª–æ–∂–Ω–µ–µ —á–µ–º —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è. –í –æ–±—â–µ–º –µ—Å–ª–∏ –≤—ã –Ω—É–∂–¥–∞–µ—Ç–µ—Å—å –≤
–ø–∞—Ä—Å–µ—Ä–µ, –Ω–æ –Ω–µ —Ö–æ—Ç–∏—Ç–µ —Å–∏–ª—å–Ω–æ –≤–Ω–∏–∫–∞—Ç—å –≤ –ø—Ä–µ–¥–º–µ—Ç–Ω—É—é –æ–±–ª–∞—Å—Ç—å, —Ç–æ –∫–æ–º–±–∏–Ω–∞—Ç–æ—Ä—ã
–ø–∞—Ä—Å–µ—Ä–æ–≤ - –≤–∞—à –≤—ã–±–æ—Ä.

# –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞ –ø–∞—Ä—Å–µ—Ä-–∫–æ–º–±–∏–Ω–∞—Ç–æ—Ä–∞

–í–æ—Ç –ø—Ä–∏–º–µ—Ä –ø—Ä–æ—Å—Ç–µ–π—à–µ–≥–æ –∫–æ–¥–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∫–æ–º–±–∏–Ω–∞—Ç–æ—Ä–∞ [Sprache](https://github.com/sprache/Sprache):

```CSharp
// Parse any number of capital 'A's in a row
var parseA = Parse.Char('A').AtLeastOnce();
```

–ò–ª–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∞–≤–∏–ª–æ –¥–ª—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞. –í –Ω–µ–º –º—ã –≤–∏–¥–∏–º, —á—Ç–æ –ª–∏–¥–∏—Ä—É—é—â–∏–µ –∏
–∑–∞–º—ã–∫–∞—é—â–∏–µ –ø—Ä–æ–±–µ–ª—ã –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è, –∞ —Å–∞–º –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –¥–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å –±—É–∫–≤—ã.

```CSharp
Parser<string> identifier =
    from leading in Parse.WhiteSpace.Many()
    from first in Parse.Letter.Once()
    from rest in Parse.LetterOrDigit.Many()
    from trailing in Parse.WhiteSpace.Many()
    select new string(first.Concat(rest).ToArray());

var id = identifier.Parse(" abc123  ");

Assert.AreEqual("abc123", id);
```

# –ü—Ä–æ–±–ª–µ–º—ã –∏ –∑–∞–¥–∞—á–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞

–î–∞–ª–µ–µ —è –æ–ø–∏—à—É –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–±–ª–µ–º –∏ –∑–∞–¥–∞—á, —Å –∫–æ—Ç–æ—Ä—ã–º–∏ –º–Ω–µ –ø—Ä–∏—à–ª–æ—Å—å —Å—Ç–æ–ª–∫–Ω—É—Ç—å—Å—è
–Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞ –ø–∞—Ä—Å–µ—Ä–∞ ANTLR –≤–µ—Ä—Å–∏–∏ 4 –∏ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–≥–æ
—Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞ Roslyn.

–ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —Ç–æ, —á—Ç–æ —ç—Ç–æ —Ä–∞–∑–ª–∏—á–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã: Roslyn –Ω–∞–ø–∏—Å–∞–Ω –≤—Ä—É—á–Ω—É—é,
–ø–∞—Ä—Å–∏—Ç –∏ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç C# –∏ VB, ANTLR –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø–∞—Ä—Å–µ—Ä–æ–≤,
–ø—Ä–∏–Ω–∏–º–∞—é—â–∏–π –Ω–∞ –≤—Ö–æ–¥ –≥—Ä–∞–º–º–∞—Ç–∏–∫—É –∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∏–π –ø–∞—Ä—Å–µ—Ä –Ω–∞ —Ü–µ–ª–µ–≤–æ–º —Ä–∞–Ω—Ç–∞–π–º–µ.
–°–µ–π—á–∞—Å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –¥–æ–≤–æ–ª—å–Ω–æ –º–Ω–æ–≥–æ —Ä–∞–Ω—Ç–∞–π–º–æ–≤: Java, C#, Python 2|3, JavaScript,
C++, Go, Swift. –ü—Ä–∏—á–µ–º –ø–æ–¥ C# —Ü–µ–ª—ã—Ö –¥–≤–∞ —Ä–∞–Ω—Ç–∞–π–º–∞ –æ—Ç —Ä–∞–∑–Ω—ã—Ö –∞–≤—Ç–æ—Ä–æ–≤: –æ—Å–Ω–æ–≤–Ω–æ–π
–∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π. –¢–µ–º –Ω–µ –º–µ–Ω–µ–µ, –ø–æ –Ω–µ–∫–æ—Ç–æ—Ä—ã–º –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º Roslyn –∏ ANTLR —Å—Ö–æ–∂–∏,
–∏ —è –ø–æ–ø—ã—Ç–∞–ª—Å—è –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∏—Ö —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ.

–í –∫–æ–Ω—Ü–µ –∑–∞–≥–æ–ª–æ–≤–∫–∞ —É –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –∑–∞–¥–∞—á –≤ —Å–∫–æ–±–æ—á–∫–∞—Ö —Å—Ç–æ–∏—Ç –Ω–∞–∑–≤–∞–Ω–∏–µ PT.PM, Roslyn –∏–ª–∏
Swiftify. –û–Ω–æ –æ–∑–Ω–∞—á–∞–µ—Ç –ø—Ä–æ–µ–∫—Ç, –≤ –∫–æ—Ç–æ—Ä–æ–º –¥–∞–Ω–Ω–∞—è –∑–∞–¥–∞—á–∞ –ø–æ—è–≤–∏–ª–∞—Å—å –∏ –±—ã–ª–∞ —Ä–µ—à–µ–Ω–∞.
PT.PM –ø–æ–¥—Ä–∞–∑—É–º–µ–≤–∞–µ—Ç –≥—Ä–∞–º–º–∞—Ç–∏–∫–∏ SQL —è–∑—ã–∫–æ–≤, PHP, Java, –∞ —Ç–∞–∫–∂–µ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω—É—é C#.

* –ù–µ–æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ—Å—Ç—å
* –†–µ–≥–∏—Å—Ç—Ä–æ–Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å
* –û—Å—Ç—Ä–æ–≤–Ω—ã–µ —è–∑—ã–∫–∏ –∏ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
* –ü–∞—Ä—Å–∏–Ω–≥ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤ –∫–æ–¥–∞
* –°–∫—Ä—ã—Ç—ã–µ —Ç–æ–∫–µ–Ω—ã
* –ü—Ä–µ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–Ω—ã–µ –¥–∏—Ä–µ–∫—Ç–∏–≤—ã
* –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç –æ—à–∏–±–æ–∫
* –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞—Ä—Å–µ—Ä–æ–≤ –≤ IDE
* –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

# –ù–µ–æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ—Å—Ç—å

–û–±—ã—á–Ω–æ –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤ –ø–æ–¥—Ä–∞–∑–¥–µ–ª—è—é—Ç –Ω–∞ –ª–∏—Ç–µ—Ä–∞–ª—ã (—Å—Ç—Ä–æ–∫–∏, —Ü–µ–ª—ã–µ —á–∏—Å–ª–∞),
–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã –∏ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞. –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø—Ä–∏ –æ–ø–∏—Å–∞–Ω–∏–∏
—Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏—Ö –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–π, –∞ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã - –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö
–æ–±–æ–∑–Ω–∞—á–µ–Ω–∏–π, –Ω–∞–ø—Ä–∏–º–µ—Ä –¥–ª—è –Ω–∞–∑–≤–∞–Ω–∏–π –∫–ª–∞—Å—Å–æ–≤, –∏–º–µ–Ω –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏ —Ç.–¥. –õ–∏—Ç–µ—Ä–∞–ª—ã
–Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ø–µ—Ä–µ—Å–µ–∫–∞—é—Ç—Å—è —Å –∫–ª—é—á–µ–≤—ã–º–∏ —Å–ª–æ–≤–∞–º–∏, —á–µ–≥–æ –Ω–µ —Å–∫–∞–∂–µ—à—å –æ–± –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞—Ö.
–≠—Ç–∞ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å —Ö–æ—Ç—å –∏ —É—Å–ª–æ–∂–Ω—è–µ—Ç –ø–∞—Ä—Å–∏–Ω–≥, –æ–¥–Ω–∞–∫–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å
–æ–±—Ä–∞—Ç–Ω—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –≤ —Å–ª—É—á–∞–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö —Å–ª–æ–≤ –∏ —Ä–∞—Å—à–∏—Ä—è—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤–æ
–≤–æ–∑–º–æ–∂–Ω—ã—Ö –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤.

–î–∞–ª—å—à–µ —Ä–µ—á—å –∏–¥–µ—Ç –æ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–∏ **–Ω–µ–æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ—Å—Ç–µ–π** –Ω–∞ —É—Ä–æ–≤–Ω–µ —Ç–æ–∫–µ–Ω–æ–≤ –∏–ª–∏
—Ä–∞–∑–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–∏ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ –∏ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤.

–ù–∞ —ç—Ç–æ–º —Å–ª–∞–π–¥–µ –ø–æ–∫–∞–∑–∞–Ω –ø—Ä–∏–º–µ—Ä: `var var = 0;`

–í ANTLR –∏ –¥—Ä—É–≥–∏—Ö –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞—Ö –ø–∞—Ä—Å–µ—Ä–æ–≤ —Ç–∞–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–∞–µ—Ç—Å—è –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º
—Ç–æ–∫–µ–Ω–∞ `VAR` –≤ –ø—Ä–∞–≤–∏–ª–æ `identifier`, –∫–æ—Ç–æ—Ä–æ–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –≤ —Å–µ–±–µ –∫–∞–∫ –æ–±—ã—á–Ω—ã–π —Ç–æ–∫–µ–Ω
`ID`, —Ç–∞–∫ –∏ —Å–ø–∏—Å–æ–∫ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç —è–≤–ª—è—Ç—å—Å—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞–º–∏.
–î–∞–ª–µ–µ —ç—Ç–æ –ø—Ä–∞–≤–∏–ª–æ `identifier` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–æ –≤—Å–µ—Ö –ø—Ä–∞–≤–∏–ª–∞—Ö –≥—Ä–∞–º–º–∞—Ç–∏–∫–∏ –≤–º–µ—Å—Ç–æ
–æ–±—ã—á–Ω–æ–≥–æ —Ç–æ–∫–µ–Ω–∞ `ID`.

```ANTLR
// Lexer
VAR: 'var';
ID:  [0-9a-zA-Z];

// Parser
varDeclaration
    : VAR identifier ('=' expression)? ';'
    ;

identifier
    : ID
    // Other conflicted tokens
    | VAR;
```

# –û–±—ä–µ–∫—Ç–Ω—ã–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –≤ C#

Roslyn —Å–ø–æ—Å–æ–±–µ–Ω —Ä–∞–∑—Ä—É–ª–∏–≤–∞—Ç—å –∏ –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–µ –≤–µ—â–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é
—Å–≤–æ–π—Å—Ç–≤ –≤ –æ–±—ä–µ–∫—Ç–æ–º –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–º –æ–Ω –ø–æ–Ω–∏–º–∞–µ—Ç, —á—Ç–æ —Å–ª–µ–≤–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è
—Å–≤–æ–π—Å—Ç–≤–æ —Å–æ–∑–¥–∞–≤–∞–µ–º–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞, –∞ —Å–ø—Ä–∞–≤–∞ - —Å–∞–º –æ–±—ä–µ–∫—Ç. –ù–∞ —ç—Ç–æ–º —Å–ª–∞–π–¥–µ –ø–æ–∫–∞–∑–∞–Ω
–ø—Ä–∏–º–µ—Ä.

# –ö–∞–∫–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `nameof`?

–¢–∞–∫–∂–µ —Ö–æ—á—É —É–ø–æ–º—è–Ω—É—Ç—å –æ–± –µ—â–µ –æ–¥–Ω–æ–π –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞ —è–∑—ã–∫–æ–≤–æ–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ `nameof`
–≤ C# 6 –∏ –≤—ã—à–µ. –í–µ—Ä–Ω–µ–º—Å—è –∫ –∫–ª–∞—Å—Å—É `Foo` –∏ –µ–≥–æ —Å–≤–æ–π—Å—Ç–≤—É `Bar`. –ö–∞–∫ –¥—É–º–∞–µ—Ç–µ, —á—Ç–æ
–≤–µ—Ä–Ω–µ—Ç `nameof` –≤ —ç—Ç–æ–º –∫–æ–¥–µ?

<!-- –û–∂–∏–¥–∞–Ω–∏–µ —Ä–µ–∞–∫—Ü–∏–∏ –∏ –æ—Ç–≤–µ—Ç–æ–≤ –∏–∑ –∑–∞–ª–∞ -->

# 42

–ù—É –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ —ç—Ç–æ—Ç –æ–ø–µ—Ä–∞—Ç–æ—Ä –º–æ–∂–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –∑–¥–µ—Å—å –≤—Å–µ —á—Ç–æ —É–≥–æ–¥–Ω–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä, `42`.
–î–µ–ª–æ –≤ —Ç–æ–º, —á—Ç–æ –æ–¥–Ω–∏–º –∏–∑ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –Ω–æ–≤—ã—Ö –≤–µ—Ä—Å–∏–π C# —è–≤–ª—è–µ—Ç—Å—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å.
–ê —Ç–∞–∫–æ–π –º–µ—Ç–æ–¥ –≤ —Ç–µ–æ—Ä–∏–∏ –≥–¥–µ-—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω. –ü–æ—ç—Ç–æ–º—É –æ–Ω –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è.
–ê –∏–Ω–∞—á–µ –≤—Å–µ –º–µ—Ç–æ–¥—ã `nameof` –≤ —Å—Ç–∞—Ä–æ–º –∫–æ–¥–µ –ø–µ—Ä–µ—Å—Ç–∞–ª–∏ –±—ã —Ä–∞–±–æ—Ç–∞—Ç—å. –¢–æ –∂–µ –∫–∞—Å–∞–µ—Ç—Å—è
—Å–ª–æ–≤ `async`, `await` –∏ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –¥—Ä—É–≥–∏—Ö.

<!-- TODO: üë®‚Äçüíª –í–æ–∑–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –µ—â–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã—Ö –ø—Ä–∏–º–µ—Ä–æ–≤ -->

# –ù–µ–æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ—Å—Ç—å: —Ä–µ—à–µ–Ω–∏–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –≤—Å—Ç–∞–≤–æ–∫ –∫–æ–¥–∞

–í–æ–∑–≤—Ä–∞—â–∞—è—Å—å –∫ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—É –ø–∞—Ä—Å–µ—Ä–æ–≤ ANTLR, –ø—Ä–æ–±–ª–µ–º—É —Å –æ—Ç–¥–µ–ª–µ–Ω–∏–µ–º –∫–ª—é—á–µ–≤—ã—Ö
—Å–ª–æ–≤ –æ—Ç –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤ –º–æ–∂–Ω–æ —Ä–µ—à–∏—Ç—å –∏ —Å –ø–æ–º–æ—â—å—é –≤—Å—Ç–∞–≤–æ–∫ –∫–æ–¥–∞ –Ω–∞ —Ü–µ–ª–µ–≤–æ–º
—è–∑—ã–∫–µ, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞–∑—ã–≤–∞—é—Ç—Å—è **–¥–µ–π—Å—Ç–≤–∏—è–º–∏** (**action**) –∏–ª–∏ **—Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–º–∏ –ø—Ä–µ–¥–∏–∫—Ç–∞–º–∏**. –û–Ω–∏
–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –º–æ—â–Ω–æ—Å—Ç–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ-—Å–≤–æ–±–æ–¥–Ω–æ–π –≥—Ä–∞–º–º–∞—Ç–∏–∫–∏ –Ω–µ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ
–¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ –∫–∞–∫–∏—Ö-—Ç–æ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –∏–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è –≤—ã–ø–æ–ª–Ω—è—Ç—å –∫–∞–∫–∏–µ-—Ç–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤–æ
–≤—Ä–µ–º—è –ø–∞—Ä—Å–∏–Ω–≥–∞. –û–±–æ—Å–æ–±–ª—è—é—Ç—Å—è –æ–Ω–∏ —Ñ–∏–≥—É—Ä–Ω—ã–º–∏ —Å–∫–æ–±–∫–∞–º–∏. –†–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É –¥–µ–π—Å—Ç–≤–∏—è–º–∏ –∏
–ø—Ä–µ–¥–∏–∫–∞—Ç–∞–º–∏ –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –¥–æ–ª–∂–Ω—ã –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –∫–∞–∫–æ–π-—Ç–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
–∏ –¥–ª—è –Ω–∏—Ö –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–æ–ø—Ä–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –∑–Ω–∞–∫ –≤ –∫–æ–Ω—Ü–µ. –í–æ—Ç —Ç–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç –ø—Ä–æ—Å—Ç–µ–π—à–∏–π
–ø—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø—Ä–µ–¥–∏–∫–∞—Ç–æ–≤:

```ANTLR
// Lexer
ID:  [0-9a-zA-Z];

// Parser
varDeclaration
    : id {_input.Lt(-1).Text == VAR}? id ('=' expression)? ';'
    ;

id
    : ID;
```

–ö–∞–∫ –≤–∏–¥–∏–º, –≤ –∑–∞–≥–∞–¥–æ—á–Ω–æ–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ `_input.Lt(-1)` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Ç–µ–∫—Å—Ç –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ
—Ç–æ–∫–µ–Ω–∞ –∏, –µ—Å–ª–∏ –æ–Ω —Ä–∞–≤–µ–Ω "VAR", —Ç–æ –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ –¥–µ–∫–ª–∞—Ä–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—â–∞—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –º–æ–∂–Ω–æ —Å—á–∏—Ç–∞—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Å–ª–æ–≤–∞
–∫–ª—é—á–µ–≤—ã–º–∏ –Ω–æ —Ç–æ–ª—å–∫–æ –≤–æ –≤—Ä–µ–º—è –ø–∞—Ä—Å–∏–Ω–≥–∞, –∞ –Ω–µ –Ω–∞ —ç—Ç–∞–ø–µ —Ç–æ–∫–µ–Ω–∏–∑–∞—Ü–∏–∏.

# –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ-–∑–∞–≤–∏—Å–∏–º—ã–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ (PT.PM)

–í—Å—é –ª–æ–≥–∏–∫—É, –∫–æ—Ç–æ—Ä–∞—è –Ω–µ –∫–∞—Å–∞–µ—Ç—Å—è –ø–∞—Ä—Å–∏–Ω–≥–∞, —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø—Ä–æ–ø–∏—Å—ã–≤–∞—Ç—å –≤
—Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö –∫–ª–∞—Å—Å–∞—Ö, –∫–æ—Ç–æ—Ä—ã–µ —Ä–µ–∞–ª–∏–∑—É—é—Ç —à–∞–±–ª–æ–Ω—ã –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è **Visitor** –∏–ª–∏
**Walker**, –ø–æ-–¥—Ä—É–≥–æ–º—É **Listener**. –û–¥–Ω–∞–∫–æ –±—ã–≤–∞—é—Ç —Å–∏—Ç—É–∞—Ü–∏–∏, –∫–æ–≥–¥–∞ –±–µ–∑ –≤—Å—Ç–∞–≤–æ–∫
–∫–æ–¥–∞ –ø—Ä–æ—Å—Ç–æ –Ω–∏–∫–∞–∫ –Ω–µ –æ–±–æ–π—Ç–∏—Å—å. –ù–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ –ø–∞—Ä—Å–∏–Ω–≥–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–π Heredoc –≤ PHP.

–î–∞–Ω–Ω–∞—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –º–Ω–æ–≥–æ—Å—Ç—Ä–æ—á–Ω—É—é —Å—Ç—Ä–æ–∫—É. –û–Ω–∞ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–∞ —Ç–µ–º, —á—Ç–æ
–Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–≥–æ –º–∞—Ä–∫–µ—Ä–∞ –∏ –¥–æ–ª–∂–Ω–∞ –∑–∞–∫–∞–Ω—á–∏–≤–∞—Ç—å—Å—è —Ç–æ—á–Ω–æ —Ç–∞–∫–∏–º –∂–µ –º–∞—Ä–∫–µ—Ä–æ–º.
–§–æ—Ä–º–∞–ª—å–Ω–æ –≥–æ–≤–æ—Ä—è, –ø–∞—Ä—Å–∏–Ω–≥ –∑–∞–≤–∏—Å–∏—Ç –Ω–µ —Ç–æ–ª—å–∫–æ –æ—Ç —Ç–∏–ø–∞ —Ç–æ–∫–µ–Ω–∞, –Ω–æ –∏ –æ—Ç –µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è.
–í –ø—Ä–∏–º–µ—Ä–µ –Ω–∞ –¥–∞–Ω–Ω–æ–º —Å–ª–∞–π–¥–µ —Ç–∞–∫–∏–º –º–∞—Ä–∫–µ—Ä–æ–º —è–≤–ª—è–µ—Ç—Å—è `HeredocIdentifier`.

```PHP
<?php
    echo <<< HeredocIdentifier
Line 1.
Line 2.
HeredocIdentifier
;
```

–í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –Ω–∞–ø–∏—Å–∞—Ç—å –≥—Ä–∞–º–º–∞—Ç–∏–∫—É —Ç–∞–∫, —á—Ç–æ–±—ã –æ–Ω–∞ –±–µ–∑ –≤—Å—Ç–∞–≤–æ–∫
–∫–æ–¥–∞ —ç—Ç–æ –ø–∞—Ä—Å–∏–ª–∞. –†–µ—à–µ–Ω–∏–µ —Å–æ –≤—Å—Ç–∞–≤–∫–∞–º–∏ –∫–æ–¥–∞ –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
–≥—Ä–∞–º–º–∞—Ç–∏–∫ [PHP](https://github.com/antlr/grammars-v4/blob/master/php/PHPLexer.g4).

–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, Antlr –≤ –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç
[—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ –≤—Å—Ç–∞–≤–∫–∏ –∫–æ–¥–∞](https://github.com/antlr/antlr4/issues/1045), —Ç.–µ.
–≤—Å—Ç–∞–≤–∫–∏ –∫–æ–¥–∞ –∫–æ—Ç–æ—Ä—ã–µ —Ç—Ä–∞–Ω—Å–ª–∏—Ä–æ–≤–∞–ª–∏—Å—å –±—ã –Ω–∞ —Ü–µ–ª–µ–≤–æ–π —è–∑—ã–∫ —Ä–∞–Ω—Ç–∞–π–º–∞. –ò–∑-–∑–∞ —ç—Ç–æ–≥–æ
–ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å —Ç–∞–∫–∏–µ –≥—Ä–∞–º–º–∞—Ç–∏–∫–∏ –ø–æ–¥ —Ä–∞–∑–Ω—ã–µ —Ä–∞–Ω—Ç–∞–π–º—ã, —á—Ç–æ –≤—ã–≥–ª—è–¥–∏—Ç
–Ω–µ–∫—Ä–∞—Å–∏–≤–æ. [JavaScript](https://github.com/antlr/grammars-v4/tree/master/ecmascript),
–Ω–∞–ø—Ä–∏–º–µ—Ä, —è–≤–ª—è–µ—Ç—Å—è —Ç–∞–∫–∏–º –ø—Ä–∏–º–µ—Ä–æ–º.

–í—ã –º–æ–∂–µ—Ç–µ –∑–∞–¥–∞—Ç—å—Å—è –≤–æ–ø—Ä–æ—Å–æ–º: –∞ –∑–∞—á–µ–º –≤–æ–æ–±—â–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ PHP –≤—Å–µ —Ç–∞–∫ —É—Å–ª–æ–∂–Ω–∏–ª–∏?
–î–µ–ª–æ –≤ —Ç–æ–º, —á—Ç–æ —É–¥–æ–±–Ω–æ, –∫–æ–≥–¥–∞ —Å—Ç—Ä–æ–∫–∏ –≤—ã–≥–ª—è–¥—è—Ç —á–∏—Å—Ç–æ –∏ –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç –∑–∞—Ö–ª–∞–º–ª—è—é—â–∏–µ —Å–∏–º–≤–æ–ª—ã
—ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è. –û–¥–Ω–∞–∫–æ —ç—Ç–æ –ø–æ–ª—É—á–∞–µ—Ç—Å—è –Ω–µ –≤—Å–µ–≥–¥–∞ –∏ –ø–æ –∫—Ä–∞–π–Ω–µ–π –º–µ—Ä–µ –Ω–∞–¥–æ –∫–∞–∫-—Ç–æ
–æ–±–æ–∑–Ω–∞—á–∞—Ç—å –º–∞—Ä–∫–µ—Ä—ã –Ω–∞—á–∞–ª–∞ –∏ –æ–∫–æ–Ω—á–∞–Ω–∏—è —Å—Ç—Ä–æ–∫. –ö—Ä–∞–π–Ω–µ –º–∞–ª–æ–≤–µ—Ä–æ—è—Ç–Ω–æ, —á—Ç–æ –≤ Heredoc
–ø–æ–ø–∞–¥–µ—Ç—Å—è —Å—Ç—Ä–æ–∫–∞ —Å `HeredocIdentifier`, –æ–¥–Ω–∞–∫–æ –µ—Å–ª–∏ –ø–æ–ø–∞–¥–µ—Ç—Å—è, —Ç–æ –º–æ–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ
–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä.

# –ò–Ω—Ç–µ—Ä–ø–æ–ª–∏—Ä—É–µ–º—ã–µ —Å—Ç—Ä–æ–∫–∏ –≤ C# 6

–ù–æ PHP —è–≤–ª—è–µ—Ç—Å—è –Ω–µ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–º –ø—Ä–∏–º–µ—Ä–æ–º. –ù–∞—á–∏–Ω–∞—è —Å 6 –≤–µ—Ä—Å–∏–∏ –≤ C# –ø–æ—è–≤–∏–ª–∞—Å—å
**–∏–Ω—Ç–µ—Ä–ø–æ–ª–∏—Ä—É–µ–º—ã—Ö —Å—Ç—Ä–æ–∫**. –ö–∞–∫ –≤—ã —É–∂–µ –Ω–∞–≤–µ—Ä–Ω–æ–µ –∑–Ω–∞–µ—Ç–µ, –≤ —Å—Ç—Ä–æ–∫–µ –º–æ–∂–µ—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –Ω–µ —Ç–æ–ª—å–∫–æ
—Å–∞–º–æ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ, –Ω–æ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–∞ –≤—ã–≤–æ–¥–∞ (–≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω—É–ª–µ–π
–ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π –∏ —Ç.–¥.). –ò –ø–∞—Ä—Å–∏—Ç—å —Ç–∞–∫–∏–µ —Å—Ç—Ä–æ–∫–∏ –¥–æ–≤–æ–ª—å–Ω–æ —Å–ª–æ–∂–Ω–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä,
–∑–∞–∫—Ä—ã–≤–∞—é—â–∞—è—Å—è —Ñ–∏–≥—É—Ä–Ω–∞—è —Å–∫–æ–±–∫–∞ –º–æ–∂–µ—Ç –æ–∑–Ω–∞—á–∞—Ç—å –∫–∞–∫ —á–∞—Å—Ç—å –∏–Ω—Ç–µ—Ä–ø–æ–ª–∏—Ä—É–µ–º–æ–≥–æ –≤—ã—Ä–∞–∂–µ–Ω–∏—è
(interpolation expression), —Ç–∞–∫ –∏ –≤—ã—Ö–æ–¥ –∏–∑ —Å–∞–º–æ–≥–æ —Ä–µ–∂–∏–º–∞ –≤—ã—Ä–∞–∂–µ–Ω–∏—è. –ê –¥–≤–æ–µ—Ç–æ—á–∏–µ
–º–æ–∂–µ—Ç —Ç–∞–∫–∂–µ –±—ã—Ç—å –∫–∞–∫ —á–∞—Å—Ç—å—é –≤—ã—Ä–∞–∂–µ–Ω–∏—è —Ç–∞–∫ –∏ –æ–∑–Ω–∞—á–∞—Ç—å –∫–æ–Ω–µ—Ü –≤—ã—Ä–∞–∂–µ–Ω–∏—è –∏ –æ–ø–∏—Å–∞–Ω–∏–µ
—Ñ–æ—Ä–º–∞—Ç–∞ –≤—ã–≤–æ–¥–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, #0.##). –ö—Ä–æ–º–µ —Ç–æ–≥–æ, —Ç–∞–∫–∏–µ —Å—Ç—Ä–æ–∫–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –∫–∞–∫
–æ–±—ã—á–Ω—ã–º–∏ (*regular*), —Ç–∞–∫ –∏ –±–µ–∑ —ç–∫—Ä–∞–Ω–∏—Ä—É—é—â–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤ (*verbatium*), –∞ —Ç–∞–∫–∂–µ –º–æ–≥—É—Ç
–±—ã—Ç—å –≤–ª–æ–∂–µ–Ω–Ω—ã–º–∏ –¥—Ä—É–≥ –≤ –¥—Ä—É–≥–∞. –ü–æ–¥—Ä–æ–±–Ω–µ–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –æ–ø–∏—Å–∞–Ω –Ω–∞
[MSDN](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/interpolated-strings).

```CSharp
s = $"{p.Name} is \"{p.Age} year{(p.Age == 1 ? "" : "s")} old";
s = $"{(p.Age == 2 ? $"{new Person { } }" : "")}";
s = $@"\{p.Name}
                       ""\";
s = $"Color [ R={func(b: 3):#0.##}, G={G:#0.##}, B={B:#0.##}, A={A:#0.##} ]";
```

–í C# Antlr –ø–∞—Ä—Å–µ—Ä–µ –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è —Å—Ç—Ä–æ–∫ –±—ã–ª–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å—Ç–µ–∫–∞ –¥–ª—è
–ø–æ–¥—Å—á–µ—Ç–∞ —É—Ä–æ–≤–Ω—è —Ç–µ–∫—É—â–µ–π –∏–Ω—Ç–µ—Ä–ø–æ–ª–∏—Ä—É–µ–º–æ–π —Å—Ç—Ä–æ–∫–∏, –∞ —Ç–∞–∫–∂–µ —Ñ–∏–≥—É—Ä–Ω—ã—Ö —Å–∫–æ–±–æ–∫. –í—Å–µ —ç—Ç–æ
—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤
[CSharpLexer.g4](https://github.com/antlr/grammars-v4/blob/master/csharp/CSharpLexer.g4).

# –õ–µ–∫—Å–µ—Ä–Ω—ã–π —Ö–∞–∫: –ø–ª–æ—Ö–æ–µ —Ä–µ—à–µ–Ω–∏–µ

–í —Ç–µ–æ—Ä–∏–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞ –µ—Å—Ç—å –∏–Ω—Ç–µ—Ä–µ—Å–Ω–∞—è [–∑–∞–¥–∞—á–∫–∞](https://en.wikipedia.org/wiki/The_lexer_hack).

<!-- TODO: –¥–æ–¥–µ–ª–∞—Ç—å -->

`specifier` –æ–ø–∏—Å—ã–≤–∞–µ—Ç —Ç–∏–ø –∏ –º–æ–∂–µ—Ç —è–≤–ª—è—Ç—å—Å—è –∫–∞–∫ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–æ–º, –Ω–∞–ø—Ä–∏–º–µ—Ä `static`,
`int`, —Ç–∞–∫ –∏ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–º —Ç–∏–ø–æ–º, –Ω–∞–ø—Ä–∏–º–µ—Ä `MyType` –∫–∞–∫ –Ω–∞ —ç—Ç–æ–º —Å–ª–∞–π–¥–µ. –ü—Ä–∞–≤–∏–ª–æ
`initDeclaratorList` —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç —è–≤–ª—è—Ç—å—Å—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–º. –û–¥–Ω–∞–∫–æ –∫–∞–∫ –º–∏–Ω–∏–º—É–º
–æ–¥–Ω–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å, –Ω–æ –ø–∞—Ä—Å–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –∂–∞–¥–Ω–æ –∏ —Ä–∞—Å–ø–æ–∑–Ω–∞–µ—Ç
–ø—Ä–∏ —Ç–∞–∫–æ–π –≥—Ä–∞–º–º–∞—Ç–∏–∫–µ –≤—Å–µ —Ç–æ–∫–µ–Ω—ã –∫–∞–∫ —Å–ø–µ—Ü–∏—Ñ–∏—Ä—ã, –ø–æ—ç—Ç–æ–º—É –≤ –≤–∏–∑–∏—Ç–æ—Ä–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è
–ø–µ—Ä–µ–¥–µ–ª—ã–≤–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ç–∏–ø, –∞ –∏–º–µ–Ω–Ω–æ `staticGlobalVar` –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é. –≠—Ç–æ
–≤—ã–≥–ª—è–¥–∏—Ç –≥—Ä–æ–º–æ–∑–¥–∫–æ –∏ –Ω–µ–∫—Ä–∞—Å–∏–≤–æ. –°–∏—Ç—É–∞—Ü–∏—é –µ—â–µ –æ—Å–ª–æ–∂–Ω—è–µ—Ç —Ç–æ, —á—Ç–æ –≤ Objective-C
–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –ø–∞—Ä—Å–∏–Ω–≥ –æ–±—ä—è–≤–ª–µ–Ω–∏–π –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –±–µ–∑ —Å–∞–º–∏—Ö –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö,
–Ω–∞–ø—Ä–∏–º–µ—Ä [`unsinged int;`](https://goo.gl/kKhdCh). –¢.–µ. –ø—Ä–æ—Å—Ç–æ —Ç–∞–∫ –∑–Ω–∞–∫ –≤–æ–ø—Ä–æ—Å–∞
–∏–∑ –≥—Ä–∞–º–º–∞—Ç–∏–∫–∏ –Ω–µ —É–±—Ä–∞—Ç—å. –û–¥–Ω–∞–∫–æ –¥–∞–Ω–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ –≤—Å–µ –∂–µ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å –≤
–æ–¥–Ω—É —Å—Ç—Ä–æ—á–∫—É —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —á—Ç–æ–±—ã –ø–∞—Ä—Å–µ—Ä —Å–ø—Ä–∞–≤–ª—è–ª—Å—è —Å–æ –≤—Å–µ–º–∏ —ç—Ç–∏–º–∏ –ø—Ä–æ–±–ª–µ–º–∞–º–∏.
–ö—Ç–æ-–Ω–∏–±—É–¥—å –≤—ã—Å–∫–∞–∂–µ—Ç –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏–µ –∫–∞–∫?

<!-- –û–∂–∏–¥–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ –∏–∑ –∑–∞–ª–∞ -->

# –õ–µ–∫—Å–µ—Ä–Ω—ã–π —Ö–∞–∫: –∏–∑—è—â–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ (Swiftify)

–í–æ—Ç —ç—Ç–æ —Ä–µ—à–µ–Ω–∏–µ.

–ë–ª–∞–≥–æ–¥–∞—Ä—è —Ç–æ–º—É, —á—Ç–æ ANTLR –æ–±–ª–∞–¥–∞–µ—Ç –º–æ—â–Ω—ã–º –∞–ª–≥–æ—Ä–∏—Ç–º–æ–º –ø–∞—Ä—Å–∏–Ω–≥–∞ LL(*), –∫–æ—Ç–æ—Ä—ã–π
—Å–ø–æ—Å–æ–±–µ–Ω –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ
—Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è, –ø—Ä–∞–≤–∏–ª–æ –≤—ã—à–µ –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ –¥–µ–∫–ª–∞—Ä–∞—Ü–∏–π –º–æ–∂–Ω–æ –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å –ø–æ-–¥—Ä—É–≥–æ–º—É:

```ANTLR
varDeclaration
    : (specifiers initDeclaratorList | specifiers) ';'
    ;
```

–ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ, —á—Ç–æ –∑–∞–ø–∏—Å—å –∏–∑ –ø—Ä–æ—à–ª–æ–≥–æ —Å–ª–∞–π–¥–∞ –∏ –∏–∑ —ç—Ç–æ–≥–æ –Ω–µ —ç–∫–≤–∏–≤–∞–ª–µ—Ç–Ω—ã, –Ω–µ—Å–º–æ—Ç—Ä—è
–Ω–∞ —Ç–æ, —á—Ç–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä ? —Ä–∞—Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ —Å—É—Ç–∏ –≤ —Ç–∞–∫—É—é –∂–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—é.
–ü–µ—Ä–≤–æ–µ –ø—Ä–∞–≤–∏–ª–æ –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç –≤ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–µ, –∞ –≤—Ç–æ—Ä–æ–µ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤
—Å–ª—É—á–∞–µ, –µ—Å–ª–∏ —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å –ø–µ—Ä–≤–æ–π –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–æ–π –Ω–∏–∫–∞–∫ –Ω–µ —É–¥–∞–ª–æ—Å—å.

# –†–µ–≥–∏—Å—Ç—Ä–æ–Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å

–ù–µ–∫–æ—Ç–æ—Ä—ã–µ —è–∑—ã–∫–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è —è–≤–ª—è—é—Ç—Å—è –Ω–µ—á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–º–∏ –∫ —Ä–µ–≥–∏—Å—Ç—Ä—É.
–≠—Ç–æ –≤ –æ—Å–Ω–æ–≤–Ω–æ–º —Ö–∞—Ä–∞–∫—Ç–µ—Ä–Ω–æ –¥–ª—è —è–∑—ã–∫–æ–≤, –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã—Ö –¥–ª—è –Ω–µ
—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ —É—á–µ–±–Ω—ã—Ö (Delphi). SQL —è–∑—ã–∫–∏ –≤–æ–æ–±—â–µ –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ
—Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞–ª–∏—Å—å –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–≤ –∏ –ª—é–¥–µ–π, –Ω–∞–ø—Ä—è–º—É—é –Ω–µ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ.
–û–¥–Ω–∞–∫–æ —Ö–æ—Ç–µ–ª–∏ –∫–∞–∫ –ª—É—á—à–µ, –∞ –ø–æ–ª—É—á–∏–ª–æ—Å—å –∫–∞–∫ –≤—Å–µ–≥–¥–∞: —Å–µ–π—á–∞—Å –∏–º–∏ –∏ ORM –±–∏–±–ª–∏–æ—Ç–µ–∫–∞–º–∏
—Ç–æ–ª—å–∫–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç—ã.

–î–µ–ª–æ –≤ —Ç–æ–º, —á—Ç–æ –ø—Ä–æ—Å—Ç—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –Ω–µ –æ—á–µ–≤–∏–¥–Ω–æ, –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –ª–∏ –∏–º—è —Å –±–æ–ª—å—à–æ–π
–±—É–∫–≤—ã –æ—Ç –∏–º–µ–Ω–∏ —Å –º–∞–ª–µ–Ω—å–∫–æ–π, —Ç.–∫. –≤ –æ–±—ã—á–Ω—ã—Ö –ø–µ—Ä–µ–ø–∏—Å–∫–∞—Ö —ç—Ç–æ –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –ø–æ–Ω–∏–º–∞–Ω–∏–µ
—Ç–µ–∫—Å—Ç–∞.

–í ANTLR –Ω–µ—á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫ —Ä–µ–≥–∏—Å—Ç—Ä—É –≤—Ö–æ–¥–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞ –º–æ–∂–Ω–æ –¥–æ—Å—Ç–∏–≥–Ω—É—Ç—å –¥–≤—É–º—è
—Å–ø–æ—Å–æ–±–∞–º–∏: –ª–∏–±–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **—Ñ—Ä–∞–≥–º–µ–Ω—Ç–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã** –∏–ª–∏ –∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ä–µ–¥—Å—Ç–≤–∞
—Ä–∞–Ω—Ç–∞–π–º–∞.

–ù–∞ –¥–∞–Ω–Ω–æ–º —Å–ª–∞–π–¥–µ –æ–ø–∏—Å–∞–Ω –ø–µ—Ä–≤—ã–π —Å–ø–æ—Å–æ–±. –§—Ä–∞–≥–º–µ–Ω—Ç–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã –æ—Ç–ª–∏—á–∞—é—Ç—Å—è –æ—Ç –æ–±—ã—á–Ω—ã—Ö
—Ç–µ–º, —á—Ç–æ –æ–Ω–∏ —Å–ª—É–∂–∞—Ç –∫–∏—Ä–ø–∏—á–∏–∫–∞–º–∏, –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö —Å–æ—Å—Ç–∞–≤–ª—è—é—Ç—Å—è —Ä–µ–∞–ª—å–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã. –ê –ø—Ä–∏
—Ç–æ–∫–µ–Ω–∏–∑–∞—Ü–∏–∏ –æ–Ω–∏ –Ω–∏–∫–∞–∫ –Ω–µ —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è. –¢.–µ. –æ–Ω–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è –∑–∞–ø–∏—Å–∏.

```ANTLR
Abstract:           A B S T R A C T;
BoolType:           B O O L E A N | B O O L;
BooleanConstant:    T R U E | F A L S E;

fragment A: [aA];
fragment B: [bB];
```

–ë–µ–∑ *—Ñ—Ä–∞–≥–º–µ–Ω—Ç–Ω—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤* –≥—Ä–∞–º–º–∞—Ç–∏–∫–∞ –±—ã –≤—ã–≥–ª—è–¥–µ–ª–∞ –±–æ–ª–µ–µ –≥—Ä–æ–º–æ–∑–¥–∫–æ –∫–∞–∫ –≤–∏–¥–Ω–æ
–≤–Ω–∏–∑—É.

```ANTLR
Abstract:           [Aa][Bb][Ss][Tt][Rr][Aa][Cc][Tt];
```

–í–∏–¥–∏—Ç–µ, –∫–∞–∫–∞—è –Ω–µ–∫—Ä–∞—Å–∏–≤–∞—è –∑–∞–ø–∏—Å—å. –ò —ç—Ç–æ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ç–æ–∫–µ–Ω!

# –†–µ–≥–∏—Å—Ç—Ä–æ–Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å: —Ä–µ—à–µ–Ω–∏–µ –Ω–∞ —É—Ä–æ–≤–Ω–µ —Ä–∞–Ω—Ç–∞–π–º–∞ (PT.PM)

–¢–∞–∫–∂–µ –º–æ–∂–Ω–æ –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä –≤—Ö–æ–¥–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞ —Å–∏–º–≤–æ–ª–æ–≤ –∏ –¥–∞–ª–µ–µ —É–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã. –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–æ–º —è–≤–ª—è–µ—Ç—Å—è —Ç–æ, —á—Ç–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–µ–≥–∏—Å—Ç—Ä–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é
—É–¥–∞–ª—è–µ—Ç—Å—è, –∞ –æ–Ω–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–Ω–æ–≥–¥–∞ –≤–∞–∂–Ω–∞. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤ —Ç–æ–º –∂–µ PHP –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞
—è–≤–ª—è—é—Ç—Å—è –Ω–µ—á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–º–∏ –∫ —Ä–µ–≥–∏—Å—Ç—Ä—É, –∞ –Ω–∞–∑–≤–∞–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö - —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–º–∏.
–ù–∞–ø—Ä–∏–º–µ—Ä, `$id` –∏ `$ID` - —Ä–∞–∑–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ. –ö —Å—á–∞—Å—Ç—å—é, ANTLR –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç
—Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π [–ø–æ—Ç–æ–∫](https://gist.github.com/sharwell/9424666)
—Å–æ—Ö—Ä–∞–Ω—è—é—â–∏–π —Ä–µ–≥–∏—Å—Ç—Ä —É –∑–Ω–∞—á–µ–Ω–∏–π —Ç–æ–∫–µ–Ω–æ–≤, –Ω–æ –ø—Ä–∏ —ç—Ç–æ–º –Ω–µ —É—á–∏—Ç—ã–≤–∞—é—â–∏–π –µ–≥–æ –ø—Ä–∏
–ª–µ–∫—Å–∏—á–µ—Å–∫–æ–º –∞–Ω–∞–ª–∏–∑–µ. –ö–æ–¥ –ª–µ–∫—Å–µ—Ä–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –µ—â–µ —á–∏—â–µ, –∞ —Å–∫–æ—Ä–æ—Å—Ç—å –ø–∞—Ä—Å–µ—Ä–∞ - –µ—â–µ –≤—ã—à–µ.
–° –ø–æ–º–æ—â—å—é —Ç–∞–∫–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞ —Å–µ–π—á–∞—Å –∏ –Ω–∞–ø–∏—Å–∞–Ω—ã –≥—Ä–∞–º–º–∞—Ç–∏–∫–∏ SQL –≤ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.

# –û—Å—Ç—Ä–æ–≤–Ω—ã–µ —è–∑—ã–∫–∏ –∏ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ (PT.PM)

–°—É—â–µ—Å—Ç–≤—É—é—Ç —è–∑—ã–∫–∏, —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã –∫–æ—Ç–æ—Ä—ã—Ö –≤–ª–æ–∂–µ–Ω—ã –≤ –¥—Ä—É–≥–∏–µ —è–∑—ã–∫–∏. –¢–∞–∫–∏–µ —è–∑—ã–∫–∏ –Ω–∞–∑—ã–≤–∞—é—Ç—Å—è
**–æ—Å—Ç—Ä–æ–≤–Ω—ã–º–∏**, –∞ —Ç–∏–ø–∏—á–Ω—ã–º–∏ –ø—Ä–∏–º–µ—Ä–∞–º–∏ —è–≤–ª—è—é—Ç—Å—è JavaScript –≤–Ω—É—Ç—Ä–∏ PHP –∏–ª–∏,
–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤—Å—Ç–∞–≤–∫–∏ C# –∫–æ–¥–∞ –≤–Ω—É—Ç—Ä–∏ Aspx.

–ú–æ–∂–µ—Ç –≤–æ–∑–Ω–∏–∫–Ω—É—Ç—å –≤–æ–ø—Ä–æ—Å: –ó–∞—á–µ–º —ç—Ç–∏ —è–∑—ã–∫–∏ –ø–∞—Ä—Å–∏—Ç—å –≤–º–µ—Å—Ç–µ? –í–µ–¥—å —Å–Ω–∞—á–∞–ª–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
–æ—Ç—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–∞—Ä—Å–µ—Ä PHP, –∞ –∑–∞—Ç–µ–º –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ –ø–∞—Ä—Å–∏—Ç—Å—è JavaScript –±–µ–∑
–µ–¥–∏–Ω–æ–≥–æ PHP –±–ª–æ–∫–∞. –û–¥–Ω–∞–∫–æ –∏–Ω–æ–≥–¥–∞ —É–¥–æ–±–Ω–æ –ø–∞—Ä—Å–∏—Ç—å –≤—Å–µ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä, –≤
—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–∞—Ö –∫–æ–¥–∞.

```PHP
<?php
<head>
  <script type="text/javascript">
    document.body.innerHTML="<svg/onload=alert(1)>"
  </script>
</head>
```

–ü—Ä–∏ –ø–∞—Ä—Å–∏–Ω–≥–µ —Ç–∞–∫–∏—Ö —è–∑—ã–∫–æ–≤ —Ç—Ä–µ–±—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∫ —Ä–∞–∑–Ω—ã–µ —Ç–∏–ø—ã —Ç–æ–∫–µ–Ω–æ–≤,
—Ç–∞–∫ –∏ —Ä–∞–∑–Ω—ã–µ —Ç–∏–ø—ã —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä.

–ö —Å—á–∞—Å—Ç—å—é, –≤ ANTLR –∏ –¥—Ä—É–≥–∏—Ö –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞—Ö –ø–∞—Ä—Å–µ—Ä–æ–≤ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å
–ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ä–µ–∂–∏–º–æ–≤ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –ª–µ–∫—Å–µ–º –ø–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—è–º
—Å–∏–º–≤–æ–ª–æ–≤ –∏–ª–∏ —É—Å–ª–æ–≤–∏—è–º. –í –ø—Ä–∏–º–µ—Ä–µ –Ω–∞ —Å–ª–∞–π–¥–µ —Ç–∞–∫–∏–º–∏ –º–∞—Ä–∫–µ—Ä–∞–º–∏ —è–≤–ª—è—é—Ç—Å—è –æ—Ç–∫—Ä—ã–≤–∞—é—â–∏–π –∏
–∑–∞–∫—Ä—ã–≤–∞—é—â–∏–π —Ç–µ–≥–∏ `<script>` —Å –∏–ª–∏ –±–µ–∑ –∞—Ç—Ä–∏–±—É—Ç–æ–≤.

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–≤–∞
–ø–∞—Ä—Å–µ—Ä–∞. –°–Ω–∞—á–∞–ª–∞ –ø–∞—Ä—Å–∏—Ç—Å—è –∫–æ–¥ –Ω–∞ PHP, –ø—Ä–∏ —ç—Ç–æ–º –≤—Å—Ç–∞–≤–∫–∏ JS —Ç—Ä–∞–∫—Ç—É—é—Ç—Å—è –∫–∞–∫ —Å—Ç—Ä–æ–∫–∏,
–∞ –∑–∞—Ç–µ–º, –Ω–∞ —ç—Ç–∞–ø–µ –æ–±—Ö–æ–¥–∞ –¥–µ—Ä–µ–≤–∞ —Ä–∞–∑–±–æ—Ä–∞ PHP, –ø–∞—Ä—Å—è—Ç—Å—è –≤—Å—Ç–∞–≤–∫–∏ JS –∫–æ–¥–∞, –ø—Ä–∏—á–µ–º
–∫ –∫–∞–∂–¥–æ–º—É –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–º—É —É–∑–ª—É –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è —Å–º–µ—â–µ–Ω–∏–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Ç–µ–∫—É—â–µ–≥–æ
—Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞ –∫–æ–¥–∞.

–ö—Å—Ç–∞—Ç–∏, —É—Å–∏–ª–∏—è–º–∏ Positive Technologies –±—ã–ª–∞ –≤–∑—è—Ç–∞ –∏–∑ Mono –∏
–¥–æ—Ä–∞–±–æ—Ç–∞–Ω–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ [AspxParser](https://github.com/PositiveTechnologies/aspxparser)
–¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ Aspx —Ñ–∞–π–ª–æ–≤. –û–Ω–∞ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ–º–∞—è –ø–æ –ª–∏—Ü–µ–Ω–∑–∏–∏ MIT.

# PHP: –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å (PT.PM)

–í–æ—Ç –µ—â–µ –ø—Ä–∏–º–µ—Ä –∫–æ–¥–∞ –Ω–∞ PHP, –≤ –∫–æ—Ç–æ—Ä–æ–º –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–∞–∫ –Ω–∞–∑—ã–≤–∞–µ–º—ã–π
[**–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å**](http://php.net/manual/ru/control-structures.alternative-syntax.php)
–∏ –±–ª–æ–∫–∏ HTML –ø–µ—Ä–µ–º–µ—à–∏–≤–∞—é—Ç—Å—è —Å –±–ª–æ–∫–∞–º–∏ PHP –∫–æ–¥–∞. –ï—Å–ª–∏ –∫—Ç–æ –Ω–µ –ø–æ–Ω—è–ª, —Ç–æ –∑–¥–µ—Å—å
"–∑–∞–ø—Ä—è—Ç–∞–Ω–∞" –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è `switch case`.

```PHP
<?php switch($a): case 1: // without semicolon?>
        <br>
    <?php break ?>
    <?php case 2: ?>
        <br>
    <?php break;?>
    <?php case 3: ?>
        <br>
    <?php break;?>
<?php endswitch; ?>
```

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ –ª–µ–∫—Å–µ–º –¥–ª—è JavaScript (PT.PM)

–í ANTLR –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞ –ª–µ–∫—Å–µ–º –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥
`pushMode`, `mode`, `popMode` –∏ –≤—ã–≥–ª—è–¥–∏—Ç —ç—Ç–æ –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫:

```ANTLR
ScriptText:   ~[<]+;
ScriptClose:  '</script'? '>' -> popMode;
PHPStart:     '<?=' -> type(Echo), pushMode(PHP);
PHPStart:     '<?' 'php'? -> channel(SkipChannel), pushMode(PHP);
ScriptText2:  '<' ~[<?/]* -> type(ScriptText);
```

–í —ç—Ç–æ–º —Ñ—Ä–∞–≥–º–µ–Ω—Ç–µ –ª–µ–∫—Å–µ—Ä–∞ —Ç–∞–∫–∂–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∫–æ–º–∞–Ω–¥—ã `type`, –∫–æ—Ç–æ—Ä–∞—è –∏–∑–º–µ–Ω—è–µ—Ç
—Ç–∏–ø —Ç–æ–∫–µ–Ω–∞ –∏ `channel`, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–º–µ—â–∞–µ—Ç —Ç–æ–∫–µ–Ω –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–∞–Ω–∞–ª.
–≠—Ç—É –∫–æ–º–∞–Ω–¥—É –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏ –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –∏ –ø—Ä–æ–±–µ–ª–æ–≤.

# –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –∏ –ø—Ä–æ–±–µ–ª–æ–≤

–ö—Å—Ç–∞—Ç–∏, –æ –Ω–∏—Ö. –ù–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤, –ø—Ä–æ–±–µ–ª–æ–≤ –∏ –¥—Ä—É–≥–∏—Ö
—Ç–æ–∫–µ–Ω–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –∏–≥—Ä–∞—é—Ç –Ω–∏–∫–∞–∫–æ–π –∑–Ω–∞—á–∏–º–æ–π —Ä–æ–ª–∏ –¥–ª—è –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞,
–Ω–µ —Ç–∞–∫–∞—è —É–∂ –ø—Ä–æ—Å—Ç–∞—è –∑–∞–¥–∞—á–∞, –∫–∞–∫ –º–æ–∂–µ—Ç –ø–æ–∫–∞–∑–∞—Ç—å—Å—è –Ω–∞ –ø–µ—Ä–≤—ã–π –≤–∑–≥–ª—è–¥. –ò—Ö –º–æ–∂–Ω–æ
–ø—Ä–æ—Å—Ç–æ —É–¥–∞–ª—è—Ç—å –∏–ª–∏ –ø–æ–º–µ—â–∞—Ç—å –≤ —Å–∫—Ä—ã—Ç—ã–π –ø–æ—Ç–æ–∫, —Ç–æ–≥–¥–∞ –æ–Ω–∏ –Ω–µ –±—É–¥—É—Ç –º–µ—à–∞—Ç—å—Å—è –ø—Ä–∏
–ø–∞—Ä—Å–∏–Ω–≥–µ. –û–¥–Ω–∞–∫–æ –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ —Ç–µ—Ä—è–µ—Ç—Å—è –∏—Ö —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å —Å –¥–µ—Ä–µ–≤–æ–º —Ä–∞–∑–±–æ—Ä–∞,
—á—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –∫—Ä–∏—Ç–∏—á–Ω–æ –ø—Ä–∏ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è—Ö –¥–µ—Ä–µ–≤–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–µ. –ï—Å–ª–∏
–≥–æ–≤–æ—Ä–∏—Ç—å –ø—Ä–æ –≥—Ä–∞–º–º–∞—Ç–∏–∫–∏, —Ç–æ –º–æ–∂–Ω–æ –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è —Å–≤—è–∑—ã–≤–∞—Ç—å —Ç–∞–∫–∏–µ —Ç–æ–∫–µ–Ω—ã —Å –æ—Å–Ω–æ–≤–Ω—ã–º–∏
–≤–∫–ª—é—á–∏–≤ –∏—Ö –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –≤–æ –≤—Å–µ –ø—Ä–∞–≤–∏–ª–∞ –ø—Ä–∏–º–µ—Ä–Ω–æ –∫–∞–∫ –≤ –ø–µ—Ä–≤–æ–º –ø—É–Ω–∫—Ç–µ:

```ANTLR
declaration:
    property COMMENT* COLON COMMENT* expr COMMENT* prio?;
```

–ü–æ–Ω—è—Ç–Ω–æ–µ –¥–µ–ª–æ, —á—Ç–æ —Ç–∞–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ –Ω–∏–∫—É–¥–∞ –Ω–µ –≥–æ–¥–∏—Ç—Å—è. –ì—Ä–∞–º–º–∞—Ç–∏–∫–∞ —Å—Ç–∞–Ω–µ—Ç
–≥—Ä–æ–º–æ–∑–¥–∫–æ–π –∏ –∏–∑–±—ã—Ç–æ—á–Ω–æ–π, —Ç.–∫. –ø–æ–≤—Å—é–¥—É –±—É–¥—É—Ç –º–µ–ª—å—Ç–µ—à–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∏ –ø—Ä–æ–±–µ–ª—ã.

–í —Å–≤—è–∑–∏ —Å —ç—Ç–∏–º –±—ã–ª–æ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –¥–≤–∞ –ø–æ–¥—Ö–æ–¥–∞ –ø–æ —Å–≤—è–∑—ã–≤–∞–Ω–∏—é —Å–∫—Ä—ã—Ç—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤
—Å —É–∑–ª–∞–º–∏ –¥–µ—Ä–µ–≤–∞ —Ä–∞–∑–±–æ—Ä–∞:

* –ü–µ—Ä–≤—ã–π –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Å–≤—è–∑—ã–≤–∞–Ω–∏–∏ —Å–∫—Ä—ã—Ç—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤ —Å –Ω–µ—Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω—ã–º–∏ —É–∑–ª–∞–º–∏
  –¥–µ—Ä–µ–≤–∞ —Ä–∞–∑–±–æ—Ä–∞.
* –ê –≤—Ç–æ—Ä–æ–π - –≤ —Å–≤—è–∑—ã–≤–∞–Ω–∏–∏ —Å —Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω—ã–º–∏ —É–∑–ª–∞–º–∏ –∏–ª–∏ —Ç–æ–∫–µ–Ω–∞–º–∏.

# –°–≤—è–∑—ã–≤–∞–Ω–∏–µ —Å–∫—Ä—ã—Ç—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤ —Å —É–∑–ª–∞–º–∏ –¥–µ—Ä–µ–≤–∞ (Swiftify)

–í –Ω–∞—à–µ–º —Å–µ—Ä–≤–∏—Å–µ Swiftify –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ–∫–∞ —á—Ç–æ –ø–µ—Ä–≤—ã–π —Å–ø–æ—Å–æ–±.–í —ç—Ç–æ–º —Å–ª—É—á–∞–µ
–º–Ω–æ–∂–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤ —Ä–∞–∑–±–∏–≤–∞–µ—Ç—Å—è –Ω–∞ –ø—Ä–µ–¥—à–µ—Å—Ç–≤—É—é—â–∏–µ, –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ –∏ —Å–∏—Ä–æ—Ç—ã. –†–∞–Ω–µ–µ
–±—ã–ª–∞ –Ω–∞–π–¥–µ–Ω–∞ –∏ –¥–æ—Ä–∞–±–æ—Ç–∞–Ω–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è ANTLR 3. 

–†–∞—Å—Å–º–æ—Ç—Ä–∏–º —Å–ª–µ–¥—É—é—â–∏–π –ø—Ä–∏–º–µ—Ä —Å –¥–≤—É–º—è –≤—ã—Ä–∞–∂–µ–Ω–∏—è–º–∏ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏—è –∏ —Ñ–∏–≥—É—Ä–Ω—ã–º–∏ —Å–∫–æ–±–∫–∞–º–∏.
**–ü—Ä–µ–¥—à–µ—Å—Ç–≤—É—é—â–∏–µ** (Precending) —Ç–æ–∫–µ–Ω–∞–º–∏ —Ä–∞—Å–ø–æ–ª–∞–≥–∞—é—Ç—Å—è –ø–µ—Ä–µ–¥ —É–∑–ª–∞–º–∏ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏—è.
–í —ç—Ç–æ–º –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Ç–∞–∫–∂–µ –ø–æ–ø–∞–¥–∞–µ—Ç –∏ –Ω–∞—á–∞–ª—å–Ω—ã–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –≤ –¥–æ–∫—É–º–µ–Ω—Ç–µ (`//First Comment`).

```–°
//First comment
'{' /*Precending1*/ a = b; /*Precending2*/ b = c; '}'
```

–í —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –ø–æ—Å–ª–µ —Ç–æ–∫–µ–Ω–∞ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Ç–æ–ª—å–∫–æ —Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω—ã–π —Å–∏–º–≤–æ–ª, –æ–Ω –∑–∞–Ω–æ—Å–∏—Ç—Å—è
–≤–æ –º–Ω–æ–∂–µ—Å—Ç–≤–æ **–ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö** —Ç–æ–∫–µ–Ω–æ–≤ (Following). –ü–æ—Å–ª–µ–¥–Ω–∏–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Ç–∞–∫–∂–µ
–ø–æ–ø–∞–¥–∞–µ—Ç –≤ —ç—Ç–æ –º–Ω–æ–∂–µ—Å—Ç–≤–æ.

```–°
'{' a = b; b = c; /*Following*/ '}' /*Last comment*/
```

–í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å–∫—Ä—ã—Ç—ã–µ —Ç–æ–∫–µ–Ω—ã, –∫–æ—Ç–æ—Ä—ã–µ —Ä–∞—Å–ø–æ–ª–∞–≥–∞—é—Ç—Å—è –º–µ–∂–¥—É –¥–≤—É–º—è –∑–Ω–∞—á–∏–º—ã–º–∏ —Ç–æ–∫–µ–Ω–∞–º–∏,
–ø–æ–ø–∞–¥–∞—é—Ç –≤ —Å–ø–∏—Å–æ–∫ **—Å–∏—Ä–æ—Ç** (Orphans).

```–°
'{' /*Orphan*/ '}'
```

–ë–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –æ —Ç–∞–∫–æ–º —Å–≤—è–∑—ã–≤–∞–Ω–∏–∏ –Ω–∞–ø–∏—Å–∞–Ω–æ –≤ —Å—Ç–∞—Ç—å–µ
[Tackling Comments in ANTLR Compiler](http://meri-stuff.blogspot.ru/2012/09/tackling-comments-in-antlr-compiler.html).
–í –¥–∞–Ω–Ω–æ–º —Å–ø–æ—Å–æ–±–µ –µ—Å—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ–∫: —Å–∫—Ä—ã—Ç—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å —Å–≤—è–∑–∞–Ω—ã —Å–æ –≤—Å–µ–º–∏ —Ç–∏–ø–∞–º–∏
–Ω–µ—Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω—ã—Ö —É–∑–ª–æ–≤, –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∏—Ö –Ω–µ –æ—á–µ–Ω—å —É–¥–æ–±–Ω–æ.

# –°–≤—è–∑—ã–≤–∞–Ω–∏–µ —Å–∫—Ä—ã—Ç—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤ —Å–æ –∑–Ω–∞—á–∏–º—ã–º–∏ (Roslyn)

–î—Ä—É–≥–æ–π –ø–æ–¥—Ö–æ–¥ –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Å–≤—è–∑—ã–≤–∞–Ω–∏–∏ —Å–∫—Ä—ã—Ç—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤ —Å —Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω—ã–º–∏ —É–∑–ª–∞–º–∏
–¥–µ—Ä–µ–≤–∞ —Ä–∞–∑–±–æ—Ä–∞ –∏–ª–∏ –∑–Ω–∞—á–∏–º—ã–º–∏ —Ç–æ–∫–µ–Ω–∞–º–∏. –¢–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ Roslyn.
–°–Ω–∞—á–∞–ª–∞ —è –æ–ø–∏—à—É —Ç–∏–ø—ã —É–∑–ª–æ–≤ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–æ–≥–æ –¥–µ—Ä–µ–≤–∞ Roslyn:

**Node** - –ø–æ —Å—É—Ç–∏ —è–≤–ª—è–µ—Ç—Å—è –Ω–µ—Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω—ã–º (—Ç.–µ. –Ω–µ –∫–æ–Ω–µ—á–Ω—ã–π) —É–∑–ª–æ–º, –∫–æ—Ç–æ—Ä—ã–π —Ö—Ä–∞–Ω–∏—Ç –≤ —Å–µ–±–µ
–Ω–µ—Å–∫–æ–ª—å–∫–æ –¥—Ä—É–≥–∏—Ö —É–∑–ª–æ–≤ –∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—É—é –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—é.

**Token** - —ç—Ç–æ —Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω—ã–π —É–∑–µ–ª –¥–µ—Ä–µ–≤–∞, –∑–Ω–∞—á–∏–º—ã–π —Ç–æ–∫–µ–Ω. –ü—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –∫–ª—é—á–µ–≤–æ–µ
—Å–ª–æ–≤–æ, –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä, –ª–∏—Ç–µ—Ä–∞–ª –∏–ª–∏ –ø—É–Ω–∫—Ç—É–∞—Ü–∏—é. –ù–∞–ø—Ä–∏–º–µ—Ä, —á–∏—Å–ª–æ `42` –∏–ª–∏ `;`.

–ê –≤–æ—Ç **Trivia** - –±–æ–ª–µ–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π —Ç–æ–∫–µ–Ω, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–∏–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏, –ø—Ä–æ–±–µ–ª—ã
–∏ –¥—Ä—É–≥–∏–µ —Å–∫—Ä—ã—Ç—ã–µ —Ç–æ–∫–µ–Ω—ã. –û–Ω –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —É–∑–ª–æ–º –¥–µ—Ä–µ–≤–∞, –æ–¥–Ω–∞–∫–æ —Å–≤—è–∑—ã–≤–∞–µ—Ç—Å—è —Å –µ–≥–æ
—Ç–æ–∫–µ–Ω–∞–º–∏. –¢–∞–∫–∏–µ —É–∑–ª—ã –æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –Ω–µ–∑–∞–º–µ–Ω–∏–º—ã–º–∏ –ø—Ä–∏ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏ –¥–µ—Ä–µ–≤–∞ –æ–±—Ä–∞—Ç–Ω–æ –≤ –∫–æ–¥
(–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–µ). –°–∞–º–∏ —Ç—Ä–∏–≤–∏–∏ –º–æ–≥—É—Ç –±—ã—Ç—å **–ª–∏–¥–∏—Ä—É—é—â–∏–º–∏** (*Leading*) –∏
**–∑–∞–º—ã–∫–∞—é—â–∏–º–∏** (*Trailing*).

–í–æ –º–Ω–æ–∂–µ—Å—Ç–≤–æ –∑–∞–º—ã–∫–∞—é—â–∏—Ö –ø–æ–ø–∞–¥–∞—é—Ç –≤—Å–µ —Ç—Ä–∏–≤–∏–∏ –Ω–∞ —Ç–æ–π –∂–µ —Å–∞–º–æ–π —Å—Ç—Ä–æ—á–∫–µ –æ—Ç
–∑–Ω–∞—á–∏–º–æ–≥–æ —Ç–æ–∫–µ–Ω–∞ –¥–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ –∑–Ω–∞—á–∏–º–æ–≥–æ —Ç–æ–∫–µ–Ω–∞. –í –ø—Ä–∏–º–µ—Ä–µ —ç—Ç–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
traiking. –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å–∫—Ä—ã—Ç—ã–µ —Ç–æ–∫–µ–Ω—ã –ø–æ—Å–ª–µ —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–µ–º–æ–≥–æ –ø–æ–ø–∞–¥–∞—é—Ç –≤–æ
–º–Ω–æ–∂–µ—Å—Ç–≤–æ –ª–∏–¥–∏—Ä—É—é—â–∏—Ö –∏ —Å–≤—è–∑—ã–≤–∞—é—Ç—Å—è —Å–æ —Å–ª–µ–¥—É—é—â–∏–º –∑–Ω–∞—á–∏–º—ã–º —Ç–æ–∫–µ–Ω–æ–º. –í –ø—Ä–∏–º–µ—Ä—ã
—ç—Ç–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ leading. –ü–µ—Ä–≤—ã–π –∑–Ω–∞—á–∏–º—ã–π —Ç–æ–∫–µ–Ω —Å–æ–¥–µ—Ä–∂–∏—Ç –≤ —Å–µ–±–µ –Ω–∞—á–∞–ª—å–Ω—ã–µ
—Ç—Ä–∏–≤–∏–∏ —Ñ–∞–π–ª–∞. –°–∫—Ä—ã—Ç—ã–µ —Ç–æ–∫–µ–Ω—ã, –∑–∞–º—ã–∫–∞—é—â–∏–µ —Ñ–∞–π–ª, —Å–≤—è–∑—ã–≤–∞—é—Ç—Å—è —Å –ø–æ—Å–ª–µ–¥–Ω–∏–º
—Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–º end-of-file —Ç–æ–∫–µ–Ω–æ–º –Ω—É–ª–µ–≤–æ–π –¥–ª–∏–Ω—ã.

```CSharp
// leading 1 (var)
// leading 2 (var)
var foo = 42; /* trailing (;)*/ int bar = 100500; // trailing (;)

// leading (EOF)
EOF
```

–¢–∞–∫–æ–µ —Å–≤—è–∑—ã–≤–∞–Ω–∏–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ª—É—á—à–µ —Ñ–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ–ª–æ–∂–µ–Ω–∏–µ —Å–∫—Ä—ã—Ç—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤ –∏ –¥–∞–∂–µ
–æ—Ç–∫–ª—é—á–µ–Ω–Ω–æ–≥–æ –∫–æ–¥–∞ –∏–∑ –ø—Ä–µ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–Ω—ã—Ö –¥–∏—Ä–µ–∫—Ç–∏–≤!

# –ü—Ä–µ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–Ω—ã–µ –¥–∏—Ä–µ–∫—Ç–∏–≤—ã (Roslyn)

–ù–∞–ø–æ–º–Ω–∏—é, —á—Ç–æ *–ø—Ä–µ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–Ω—ã–º–∏ –¥–∏—Ä–µ–∫—Ç–∏–≤–∞–º–∏* –Ω–∞–∑–≤–∞—é—Ç—Å—è –≤—Å—Ç–∞–≤–∫–∏ –Ω–∞ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–º
—è–∑—ã–∫–µ, —Å –ø–æ–º–æ—â—å—é –∫–æ—Ç–æ—Ä–æ–≥–æ –º–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∞—Ç—å –∫—É—Å–∫–∏ –∫–æ–¥–∞ –ø—Ä–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö.
–ò—Ö —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤ API –≤ —Ä–∞–∑–Ω—ã—Ö –≤–µ—Ä—Å–∏—è—Ö .NET —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤.

–í –∫–æ–¥–µ –Ω–∞ —Å–ª–∞–π–¥–µ –ø—Ä–∏ –∑–∞–¥–∞–Ω–Ω–æ–º —Å–∏–º–≤–æ–ª–µ `DEBUG` –æ—Ç–∫–ª—é—á–µ–Ω–Ω—ã–π (–∑–∞–¥–∏–∑–∞–±–ª–µ–Ω–Ω—ã–π) –∫–æ–¥
–ø–æ–ø–∞–¥–µ—Ç –≤ —Å–ø–∏—Å–æ–∫ *Leading* –¥–ª—è —Ç–æ—á–∫–∏ —Å –∑–∞–ø—è—Ç–æ–π `;`, –∞ —Ç–µ–∫—Å—Ç `#if NETCORE` - –≤
—Å–ø–∏—Å–æ–∫ *Leading* –¥–ª—è —Ç–æ–∫–µ–Ω–∞ `true`.

```CSharp
bool trueFlag =
#if NETCORE
    true
#else
    new Random().Next(100) > 95 ? true : false
#endif
;
```

<!-- TODO: –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π -->

# –ü—Ä–µ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–Ω—ã–µ –¥–∏—Ä–µ–∫—Ç–∏–≤—ã: –æ–¥–Ω–æ—ç—Ç–∞–ø–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ (Swiftify)

–í ANTLR —Ç–æ–∫–µ–Ω—ã –¥–∏—Ä–µ–∫—Ç–∏–≤ –∑–∞–Ω–æ—Å—è—Ç—Å—è –≤ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –∫–∞–Ω–∞–ª –∏ –ø—Ä–∏ –æ–±—Ö–æ–¥–µ –¥–µ—Ä–µ–≤–∞
—Ä–∞–∑–±–æ—Ä–∞ –æ–Ω–∏ –ø–∞—Ä—Å—è—Ç—Å—è. –≠—Ç–æ –ø–æ—Ö–æ–∂–µ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—Å—Ç—Ä–æ–≤–Ω—ã—Ö —è–∑—ã–∫–æ–≤. –¢–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥
–ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –º–∞–∫—Ä–æ—Å—ã –∫–∞–∫ –æ–±—ã–∫–Ω–æ–≤–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
(–ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –¥–∏—Ä–µ–∫—Ç–∏–≤ –º–∞–∫—Ä–æ—Å—ã –±—ã –∏–Ω–ª–∞–π–Ω–∏–ª–∏—Å—å, —á—Ç–æ –Ω–∞–º –Ω–µ –æ—á–µ–Ω—å –ø–æ–¥—Ö–æ–¥–∏–ª–æ):

```Objective-C
#define DEGREES_TO_RADIANS(degrees) (M_PI * (degrees) / 180)
```

```Swift
func DEGREES_TO_RADIANS(degrees: Double)
    -> Double { return (.pi * degrees)/180; }
```

–ü–æ—Ç–µ—Å—Ç–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –¥–∏—Ä–µ–∫—Ç–∏–≤ —É–∂–µ –º–æ–∂–Ω–æ —Å–µ–π—á–∞—Å –≤ ([Swiftify](http://objc.to/l4bamg)).
–û–¥–Ω–∞–∫–æ –ø—Ä–∏ —Ç–∞–∫–æ–º —Å–ø–æ—Å–æ–±–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–æ–∑–º–æ–∂–Ω—ã –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞ –¥–ª—è
–Ω–µ–∑–∞–∫–æ–Ω—á–µ–Ω–Ω—ã—Ö —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤ –∫–æ–¥–∞.

<!-- TODO: –¥–æ–±–∞–≤–∏—Ç—å –Ω–µ–∑–∞–∫–æ–Ω—á–µ–Ω–Ω—ã–π —Ñ—Ä–∞–≥–º–µ–Ω—Ç –∫–æ–¥–∞ -->

# –ü—Ä–µ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–Ω—ã–µ –¥–∏—Ä–µ–∫—Ç–∏–≤—ã: –¥–≤—É—Ö—ç—Ç–∞–ø–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ (Codebeat)

–ï—Å–ª–∏ –≥–æ–≤–æ—Ä–∏—Ç—å –æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–º —Å–ø–æ—Å–æ–±–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–µ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–Ω—ã—Ö –¥–∏—Ä–µ–∫—Ç–∏–≤, —Ç–æ
—Å–Ω–∞—á–∞–ª–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –∫–æ–¥ –¥–∏—Ä–µ–∫—Ç–∏–≤, –∞ –∑–∞—Ç–µ–º —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ–±—ã—á–Ω—ã–π –ø–∞—Ä—Å–µ—Ä.
–ù–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –∫–æ–¥–∞ –≤—ã—à–µ –≤—Ö–æ–¥–Ω–æ–π –∫–æ–¥ –¥–ª—è –ø–∞—Ä—Å–µ—Ä–∞ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º.

```CSharp
bool¬∑trueFlag¬∑=
¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑
¬∑¬∑¬∑¬∑true
¬∑¬∑¬∑¬∑¬∑
¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑
¬∑¬∑¬∑¬∑¬∑¬∑
;
```

–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –ø—Ä–æ–±–µ–ª—ã (–Ω—É –∏ –ø—Ä–æ–±–ª–µ–º—ã üôÇ) —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è, —Ç.–∫. –æ–Ω–∏
–Ω—É–∂–Ω—ã –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—à–∏–±–æ–∫ –∏ –ª–æ–∫–∞—Ü–∏–∏ (TextSpan) —É –≤—Å–µ—Ö —Ä–µ–∞–ª—å–Ω—ã—Ö —É–∑–ª–æ–≤.

–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–µ–π—Å—Ç–≤–∏–π –ø—Ä–∏ —ç—Ç–æ–º —Å–ø–æ—Å–æ–±–µ —Ç–∞–∫–∞—è:

–°–Ω–∞—á–∞–ª–∞ —Ç–æ–∫–µ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è –∏ —Ä–∞–∑–±–∏—Ä–∞—é—Ç—Å—è –¥–∏—Ä–µ—Ç–∫–∏–≤—ã.

–ó–∞—Ç–µ–º –≤—ã—á–∏—Å–ª—è—é—Ç—Å—è —É—Å–ª–æ–≤–Ω—ã–µ –¥–∏—Ä–µ–∫—Ç–∏–≤ `#if` –∏ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –∫–æ–º–ø–∏–ª–∏—Ä—É–µ–º—ã–µ –±–ª–æ–∫–∏ –∫–æ–¥–∞.

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –¥–∏—Ä–µ–∫—Ç–∏–≤—ã –∑–∞–º–µ–Ω—è—é—Ç—Å—è –Ω–∞ –ø—Ä–æ–±–µ–ª—ã.

–ê –≤ –∫–æ–Ω—Ü–µ —Ç–æ–∫–µ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è –∏ –ø–∞—Ä—Å–∏—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∏—Ä—É—é—â–∏–π —Ç–µ–∫—Å—Ç —Å —É–¥–∞–ª–µ–Ω–Ω—ã–º–∏ –¥–∏—Ä–µ–∫—Ç–∏–≤–∞–º–∏.

–¢–∞–∫–æ–π —Å–ø–æ—Å–æ–± –¥–≤—É—Ö—ç—Ç–∞–ø–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç–∞–∫–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –¥–ª—è –≥—Ä–∞–º–º–∞—Ç–∏–∫–∏ Objective-C
–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –≤–µ–±-—Å–µ—Ä–≤–∏—Å–µ –¥–ª—è –ø–æ–¥—Å—á–µ—Ç–∞ –º–µ—Ç—Ä–∏–∫ –∫–æ–¥–∞ –∏ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è —Ä–µ–≤—å—é
[Codebeat](https://codebeat.co/).

# –ü–∞—Ä—Å–∏–Ω–≥ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤ –∫–æ–¥–∞ (Swiftify, PT.PM)

–í—Ö–æ–¥–Ω–æ–π –µ–¥–∏–Ω–∏—Ü–µ–π –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞ –æ–±—ã—á–Ω–æ —è–≤–ª—è–µ—Ç—Å—è —Ü–µ–ª—ã–π —Ñ–∞–π–ª, —Ç.–µ. –µ—Å–ª–∏ –≥–æ–≤–æ—Ä–∏—Ç—å
–ø—Ä–æ C#, —Ç–æ —Ç–∞–∫–æ–π —Ñ–∞–π–ª –≤ –Ω–∞—á–∞–ª–µ —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ø–∏—Å–æ–∫ `using`-–≥–æ–≤, –∑–∞—Ç–µ–º –∏–¥–µ—Ç –æ–±—ä—è–≤–ª–µ–Ω–∏–µ
`namespace`, –¥–µ–∫–ª–∞—Ä–∞—Ü–∏—è –∫–ª–∞—Å—Å–∞, –Ω—É –∏ —Ç.–¥. –¢.–µ. –∏–∑–≤–µ—Å—Ç–Ω–æ —Å —á–µ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è.
–ï—Å–ª–∏ –≥–æ–≤–æ—Ä–∏—Ç—å –≤ —Ç–µ—Ä–º–∏–Ω–∞—Ö ANTLR –∏ –≥—Ä–∞–º–º–∞—Ç–∏–∫, —Ç–æ –∏–∑–≤–µ—Å—Ç–Ω–æ –∫–æ—Ä–Ω–µ–≤–æ–µ –ø—Ä–∞–≤–∏–ª–æ –ø–∞—Ä—Å–∏–Ω–≥–∞,
–æ–±—ã—á–Ω–æ —ç—Ç–æ —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ `topDeclaration` –∏–ª–∏ `compilationUnit`.

–û–¥–Ω–∞–∫–æ —á—Ç–æ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å —Ñ—Ä–∞–≥–º–µ–Ω—Ç –∫–æ–¥–∞? –¢–∞–∫–æ–µ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è
–≤ IDE –ø—Ä–∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∏ –∏–ª–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∏–Ω–≥–∞ –∫—É—Å–æ—á–∫–∞ –∫–æ–¥–∞.
–ó–∞–¥–∞—á–∞ —É—Å–ª–æ–∂–Ω—è–µ—Ç—Å—è –µ—Å–ª–∏ –≤ —ç—Ç–æ–º —Ñ—Ä–∞–≥–º–µ–Ω—Ç–µ –µ—â–µ –µ—Å—Ç—å –∏ –æ—à–∏–±–∫–∏.

–≠—Ç—É –∑–∞–¥–∞—á—É –º–æ–∂–Ω–æ —Ä–µ—à–∏—Ç—å —Ä–∞–∑–Ω—ã–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏: —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –æ–ø–µ—Ä–∞—Ü–∏–π –Ω–∞ —Å—Ç—Ä–æ–∫–∞—Ö –∏
—Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π, —Å –ø–æ–º–æ—â—å—é —Ç–æ–∫–µ–Ω–æ–≤ –∏ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞. –ú–æ–∂–Ω–æ –ø—ã—Ç–∞—Ç—å—Å—è
–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫–æ—Ä–Ω–µ–≤–æ–µ –ø—Ä–∞–≤–∏–ª–æ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º, –æ–¥–Ω–∞–∫–æ –æ–Ω–∏ –º–æ–≥—É—Ç –≤—Å—Ç—Ä–µ—Ç–∏—Ç—å—Å—è –∏
–≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö. –° —Ç–æ–∫–µ–Ω–∞–º–∏ —Ç–æ–∂–µ –Ω–µ –≤—Å–µ —Ç–∞–∫ –≥–ª–∞–¥–∫–æ. –í –∏—Ç–æ–≥–µ –±—ã–ª–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ
—Ä–µ—à–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ –ø–∞—Ä—Å–∏–Ω–≥–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞ —Ä–∞–∑–Ω—ã–º–∏ –ø—Ä–∞–≤–∏–ª–∞–º–∏ –∏ –≤—ã–±–æ—Ä–µ –ø—Ä–∞–≤–∏–ª–∞
–±–µ–∑ –æ—à–∏–±–æ–∫ –∏–ª–∏ –ø—Ä–∞–≤–∏–ª–∞ —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –±–ª–∏–∑–∫–æ–π –∫ –∫–æ–Ω—Ü—É –ø–æ–∑–∏—Ü–∏–µ–π. –ü—Ä–æ–±–æ–≤–∞–ª–∏ –≤—ã–±–∏—Ä–∞—Ç—å
–ø—Ä–∞–≤–∏–ª–∞ —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –æ—à–∏–±–æ–∫, –Ω–æ —ç—Ç–æ –ø–æ–∫–∞–∑–∞–ª–æ —Ö—É–¥—à–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã.

–ü–æ —Å—Å—ã–ª–∫–∞–º –¥–æ—Å—Ç—É–ø–Ω—ã –ø—Ä–∏–º–µ—Ä—ã —Ç–∞–∫–∏—Ö —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤, –Ω—É –≤—ã –∏ —Å–∞–º–∏ –º–æ–∂–µ—Ç–µ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å
–≤–≤–µ—Å—Ç–∏ —Å–≤–æ–∏ –∏ –ø–æ—Ç–µ—Å—Ç–∏—Ç—å –µ—Å–ª–∏ –∑–Ω–∞–µ—Ç–µ Objective-C.

* [–£—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è](http://objc.to/6mpmhq)
* [–î–µ–∫–ª–∞—Ä–∞—Ü–∏–∏ –º–µ—Ç–æ–¥–æ–≤](http://objc.to/nt25a1)
* [–°–≤–æ–π—Å—Ç–≤–∞](http://objc.to/vnpasw)

# –û—à–∏–±–∫–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞

–ö—Å—Ç–∞—Ç–∏, –æ–± –æ—à–∏–±–∫–∞—Ö. –í–∞–∂–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å—é –∫–∞–∂–¥–æ–≥–æ –ø–∞—Ä—Å–µ—Ä–∞ —è–≤–ª—è–µ—Ç—Å—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫,
—Ç.–∫. –ø–∞—Ä—Å–µ—Ä –Ω–µ –¥–æ–ª–∂–µ–Ω –ø–∞–¥–∞—Ç—å —Ç–æ–ª—å–∫–æ –∏–∑-–∑–∞ –æ–¥–Ω–æ–π –æ—à–∏–±–∫–∏, –∞ –¥–æ–ª–∂–µ–Ω "–ø–æ–Ω–∏–º–∞—Ç—å",
—á—Ç–æ —ç—Ç–æ –∑–∞ –æ—à–∏–±–∫–∞ –∏ –ø–∞—Ä—Å–∏—Ç—å –∫–æ–¥ –¥–∞–ª—å—à–µ. –û–Ω –¥–æ–ª–∂–µ–Ω –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
–æ—à–∏–±–æ–∫ –∏ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å –Ω–∞–∏–±–æ–ª–µ–µ –ø–æ–Ω—è—Ç–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ. –¢—É—Ç –º–æ–∂–Ω–æ –≤—Å–ø–æ–º–Ω–∏—Ç—å –ø—Ä–æ C++ —Å –∫—É—á–µ–π
–æ—à–∏–±–æ–∫ –≤ —Å–ª—É—á–∞–µ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞–ø–∏—Å–∞–Ω–Ω–æ–≥–æ —à–∞–±–ª–æ–Ω–∞.

–£ Roslyn –∏ ANTLR –ø—Ä–∏–º–µ—Ä–Ω–æ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –∫–æ–¥—ã –æ—à–∏–±–æ–∫, –Ω–æ –ø–æ—Å–ª–µ–¥–Ω–∏–π –∫–æ–Ω–µ—á–Ω–æ —Ö—É–∂–µ
—Å –Ω–∏–º–∏ —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∏–∑-–∑–∞ —Å–≤–æ–µ–π —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ—Å—Ç–∏.

–í —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –ª–µ–∫—Å–µ—Ä ANTLR –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥–æ–±—Ä–∞—Ç—å –ª–µ–∫—Å–∏—á–µ—Å–∫–æ–µ –ø—Ä–∞–≤–∏–ª–æ –¥–ª—è –≤—Ö–æ–¥–Ω–æ–≥–æ
—Å–∏–º–≤–æ–ª–∞, —Ç–æ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è **–æ—à–∏–±–∫–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Ç–æ–∫–µ–Ω–∞**. –ü–ª–æ—Ö–æ —Ç–æ, —á—Ç–æ
–≤ —Å–ª—É—á–∞–µ –∫—Ä–∞–∫–æ–∑—è–±—Ä –±—É–¥–µ—Ç —Ç—å–º–∞ –æ—à–∏–±–æ–∫, —Ä–∞–≤–Ω–∞—è –∫–æ–ª–∏—á–µ—Å—Ç–≤—É —ç—Ç–∏—Ö –∫—Ä–∞–∫–æ–∑—è–±—Ä. –í
Roslyn —Ç–∞–∫–æ–≥–æ –Ω–µ –±—É–¥–µ—Ç. –û–¥–Ω–∞–∫–æ —Å –ø–æ–º–æ—â—å—é —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–≥–æ –ø—Ä–∞–≤–∏–ª–∞
`ERROR: . -> channel(ErrorChannel)` –º–æ–∂–Ω–æ –ø–æ–º–µ—â–∞—Ç—å –≤—Å–µ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã –≤
–æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–∞–Ω–∞–ª.

–í–≤–µ—Ä—Ö—É –ø—Ä–∏–º–µ—Ä –∫–æ–¥–∞ —Å –ª–µ–∫—Å–∏—á–µ—Å–∫–æ–π –æ—à–∏–±–∫–æ–π. –ù–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–∞ —Ä–µ—à–µ—Ç–∫–∞ –Ω–∞ –º–µ—Å—Ç–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞
–∫–ª–∞—Å—Å–∞.

```CSharp
class # { int i; }
```

–í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏ –∫–∞—Å–∞—é—Ç—Å—è –ø–∞—Ä—Å–µ—Ä–∞. –ß–∞—Å—Ç–æ –≤–æ–∑–Ω–∏–∫–∞—é—Ç —Å–∏—Ç—É–∞—Ü–∏–∏, –≤ –∫–æ—Ç–æ—Ä—ã—Ö
—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–µ –¥–æ–ø–∏—Å–∞–ª –Ω—É–∂–Ω—ã–π —Å–∏–º–≤–æ–ª –∏–ª–∏ –Ω–∞–æ–±–æ—Ä–æ—Ç, –Ω–∞–ø–∏—Å–∞–ª –ª–∏—à–Ω–∏–π.
–í —Å–ª–µ–¥—É—é—â–µ–º –ø—Ä–∏–º–µ—Ä–µ –≤–≤–µ—Ä—Ö—É –ø—Ä–æ–ø—É—â–µ–Ω–∞ —Å–∫–æ–±–∫–∞, –∞ –≤–Ω–∏–∑—É –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ª–∏—à–Ω—è—è —Ç–æ—á–∫–∞ —Å –∑–∞–ø—è—Ç–æ–π
–ø–æ—Å–ª–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞ –∫–ª–∞—Å—Å–∞. –¢–∞–∫–∏–µ –æ—à–∏–±–∫–∏ –Ω–∞–∑–≤–∞—é—Ç –æ—à–∏–±–∫–∞–º–∏ —Å –µ–¥–∏–Ω–∏—á–Ω—ã–º
–æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–º –∏ –ª–∏—à–Ω–∏–º —Ç–æ–∫–µ–Ω–∞–º–∏.

```CSharp
class T { int f(x) { a = 3; } // –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–π —Ç–æ–∫–µ–Ω
class T ; { int i; } // –õ–∏—à–Ω–∏–π —Ç–æ–∫–µ–Ω
```

–í —Å–ª—É—á–∞–µ –µ—Å–ª–∏ –ª–∏—à–Ω–∏—Ö —Ç–æ–∫–µ–Ω–æ–≤ –Ω–µ—Å–∫–æ–ª—å–∫–æ, —Ç–æ –≤ –ø–∞—Ä—Å–µ—Ä–µ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è —Ä–µ–∂–∏–º
"–ø–∞–Ω–∏–∫–∏", –∏ –æ–Ω –ø—ã—Ç–∞–µ—Ç—Å—è –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –ª–∏—à–Ω–∏–µ —Ç–æ–∫–µ–Ω—ã, –ø–æ–∫–∞ –Ω–µ –≤—Å—Ç—Ä–µ—Ç–∏—Ç –∫–æ–Ω–µ—á–Ω—ã–π,
—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—â–∏–π. –¢–∞–∫–∏–º –º–æ–∂–µ—Ç —è–≤–ª—è—Ç—å—Å—è, –Ω–∞–ø—Ä–∏–º–µ—Ä, `;` –∏–ª–∏ `}`. –í–æ—Ç –ø—Ä–æ—Å—Ç–µ—à–∏–π
–ø—Ä–∏–º–µ—Ä:

```CSharp
class T { int f(x) { a = 3 4 5; } }
```

–í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏ –∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä—É—é—Ç—Å—è –∫–∞–∫ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–µ–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–µ
–ø–æ–¥–ø—Ä–∞–≤–∏–ª–æ:

```CSharp
class T { int ; }
```

# –û—à–∏–±–∫–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞ –≤ Roslyn

–ù–∞ —ç—Ç–æ–º —Å–ª–∞–π–¥–µ –ø–æ–∫–∞–∑–∞–Ω –ø—Ä–∏–º–µ—Ä C# –∫–æ–¥–∞, –≤ –∫–æ—Ç–æ—Ä–æ–º —É–¥–∞–ª–æ—Å—å –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏
–Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ Roslyn.

–ü–µ—Ä–≤–æ–π —è–≤–ª—è–µ—Ç—Å—è **–ª–∏—à–Ω–∏–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å** (*Skipped Trivia). –≠—Ç–æ —Å–ª—É—á–∞–π–Ω–æ –Ω–∞–ø–µ—á–∞—Ç–∞–Ω–Ω—ã–π
—Å–∏–º–≤–æ–ª –∏–ª–∏ `;` –∫–∞–∫ –∑–¥–µ—Å—å. –ü—Ä–∏ —ç—Ç–æ–π –æ—à–∏–±–∫–µ Roslyn —Å–æ–∑–¥–∞–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–π —É–∑–µ–ª —Å
`Kind = SkippedTokensTrivia`.

–í—Ç–æ—Ä–∞—è –æ—à–∏–±–∫–∞ - **–Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å**. –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ Roslyn –¥–æ—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç
—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —É–∑–µ–ª —Å–æ –∑–Ω–∞—á–µ–Ω–∏–µ–º —Å–≤–æ–π—Å—Ç–≤–∞ `IsMissing = true`. –¢–∏–ø–∏—á–Ω—ã–π –ø—Ä–∏–º–µ—Ä -
Statement –±–µ–∑ —Ç–æ—á–∫–∏ —Å –∑–∞–ø—è—Ç–æ–π.

–î–ª—è —Å–ª–µ–¥—É—é—â–∏—Ö –æ—à–∏–±–æ–∫ **–Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —á–∏—Å–ª–µ–Ω–Ω–æ–≥–æ, —Å—Ç—Ä–æ–∫–æ–≤–æ–≥–æ –∏–ª–∏ —Å–∏–º–≤–æ–ª—å–Ω–æ–≥–æ –ª–∏—Ç–µ—Ä–∞–ª–∞**
—Å–æ–∑–¥–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω—ã–π —É–∑–µ–ª —Å Kind, —Ä–∞–≤–Ω—ã–º `NumericLiteralToken`,
`StringLiteralToken` –∏–ª–∏ `CharacterLiteralToken`. –≠—Ç–æ –æ—à–∏–±–∫–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä,
—Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏–µ –ª–∏–±–æ –ø—É—Å—Ç–æ–≥–æ char.

–ü–æ—Å–ª–µ–¥–Ω—è—è –æ—à–∏–±–∫–∞ - **–Ω–µ–∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–π —á–ª–µ–Ω**. –ü—Ä–∏ —ç—Ç–æ–º —Å–æ–∑–¥–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω—ã–π —É–∑–µ–ª
`IncompleteMember`;

–ö–∞–∫ –≤–∏–¥–∏–º, –æ—à–∏–±–∫–∏ *–Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å* (Missing) –∏ *–ª–∏—à–Ω–∏–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å*
(Skipped Trivia) –ø–æ—Ö–æ–∂–∏ –Ω–∞ –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏ –≤ ANTLR.

```CSharp
namespace App
{
    class Program
    {
        ;                    // Skipped Trivia
        static void Main(string[] args)
        {
            a                // Missing ';'
            ulong ul = 1lu;  // Incorrect Numeric
            string s = """;  // Incorrect String
            char c = '';     // Incorrect Char
        }
    }

    class bControl flow
    {
        c                    // Incomplete Member
    }
}
```

–ö–∞–∫ —É–∂–µ –≥–æ–≤–æ—Ä–∏–ª–æ—Å—å –≤ –Ω–∞—á–∞–ª–µ, –ø–∞—Ä—Å–µ—Ä—ã, –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–µ –≤—Ä—É—á–Ω—É—é, –±–æ–ª–µ–µ –≥–∏–±–∫–∏–µ. –≠—Ç–æ
–∫–∞—Å–∞–µ—Ç—Å—è –≤ —Ç–æ–º —á–∏—Å–ª–µ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Ç –æ—à–∏–±–æ–∫. –í–∏–¥–∏—Ç–µ, –∑–¥–µ—Å—å –¥–∞–∂–µ –ø–æ–¥—Å–≤–µ—Ç–∫–∞
–ø–æ–ø–ª—ã–ª–∞, –∞ Roslyn –≤—ã–¥–∞–ª –≤—Å–µ–≥–æ 6 –æ—à–∏–±–æ–∫!

–ë–ª–∞–≥–æ–¥–∞—Ä—è —Ç–∞–∫–∏–º –ø—Ä–æ–¥—É–º–∞–Ω–Ω—ã–º —Ç–∏–ø–∞–º —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫ –∏ —Å–≤—è–∑—ã–≤–∞–Ω–∏—é —Å–∫—Ä—ã—Ç—ã—Ö
—Ç–æ–∫–µ–Ω–æ–≤, Roslyn –º–æ–∂–µ—Ç –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –¥–µ—Ä–µ–≤–æ —Å –ª—é–±—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –æ—à–∏–±–æ–∫ –æ–±—Ä–∞—Ç–Ω–æ –≤
–∫–æ–¥ —Å–∏–º–≤–æ–ª –≤ —Å–∏–º–≤–æ–ª. –¢–∞–∫–æ–µ –¥–µ—Ä–µ–≤–æ –Ω–∞–∑—ã–≤–∞—é—Ç **–¥–æ—Å—Ç–æ–≤–µ—Ä–Ω—ã–º** (–∏–ª–∏ **full fidelity**).

# goto fail

<!-- TODO: –¥–æ–ø–∏—Å–∞—Ç—å —Å–µ–∫—Ü–∏—é -->

# –ó–∞–∫–ª—é—á–µ–Ω–∏–µ –æ –ø–∞—Ä—Å–∏–Ω–≥–µ

–Ø –∑–∞—Ç—Ä–æ–Ω—É–ª –Ω–µ –≤—Å–µ —Ç–µ–º—ã –ø–∞—Ä—Å–∏–Ω–≥–∞, –Ω–µ –æ—Å–≤—è—Ç–∏—Ç—å —Ç–µ–º—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ IDE,
–∞–≤—Ç–æ–∫–æ–º–ø–ª–∏—Ç–∞, —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞ (—ç–¥–∞–∫–æ–≥–æ –∞–Ω—Ç–∏–ø–∞—Ä—Å–∏–Ω–≥–∞), –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏.
–ù–æ —Ç–∞–∫ –∫–∞–∫ —É –Ω–∞—Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è, —Ç–æ —Ö–æ—á—É –µ—â–µ –Ω–µ–º–Ω–æ–≥–æ –æ—Å–≤—è—Ç–∏—Ç—å —Ç–µ–º—É –æ–±—Ä–∞–±–æ—Ç–∫–∏
–¥—Ä–µ–≤–æ–≤–∏–¥–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä –≤ .NET.

# –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥—Ä–µ–≤–æ–≤–∏–¥–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä

–ö–∞–∫ —è —É–∂–µ –≥–æ–≤–æ—Ä–∏–ª, –ø–∞—Ä—Å–µ—Ä –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥—Ä–µ–≤–æ–≤–∏–¥–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É, –∫–æ—Ç–æ—Ä–∞—è –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è
*–¥–µ—Ä–µ–≤–æ–º —Ä–∞–∑–±–æ—Ä–∞*. –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω–æ–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–æ–µ –¥–µ—Ä–µ–≤–æ –∏–ª–∏ AST –Ω–∞–∑—ã–≤–∞—é—Ç –¥–µ—Ä–µ–≤–æ
—Ä–∞–∑–±–æ—Ä–∞ –Ω–∞ –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–æ–º —É—Ä–æ–≤–Ω–µ, –∏–∑ –∫–æ—Ç–æ—Ä–æ–≥–æ —É–¥–∞–ª–µ–Ω—ã –Ω–µ –∑–Ω–∞—á–∏–º—ã–µ —Ç–æ–∫–µ–Ω—ã,
—Ç–∞–∫–∏–µ –∫–∞–∫ —Å–∫–æ–±–∫–∏, –∑–∞–ø—è—Ç—ã–µ, –ø—Ä–æ–±–µ–ª—ã –∏ —Ç.–¥.

–î–µ—Ä–µ–≤—å—è –Ω—É–∂–Ω–æ –∫–∞–∫-—Ç–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å. –°–ª–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–æ–±–æ–π —Ç–æ, —á—Ç–æ —Ç–∞–∫–∏–µ
—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–µ –∏ –¥–ª—è –∏—Ö –æ–±—Ö–æ–¥–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã
–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞–∑—ã–≤–∞—é—Ç—Å—è *Visitor* –∏ *Listener*. –≠—Ç–∏ —à–∞–±–ª–æ–Ω—ã –º–æ–∂–Ω–æ
–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ —Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å –ø–æ-—Ä–∞–∑–Ω–æ–º—É. –ü–æ–º–∏–º–æ –æ–±—Ö–æ–¥–∞, –¥–µ—Ä–µ–≤—å—è –µ—â–µ –º–æ–∂–Ω–æ
—Å–µ—Ä–∏–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å, —Ç.–µ. —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –∏—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏–ª–∏
–ø–µ—Ä–µ–¥–∞—á–∏. –¢–∞–∫–∂–µ –ø—Ä–∏ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏—è—Ö —Å –¥–µ—Ä–µ–≤–æ–º –Ω–µ—Ä–µ–¥–∫–æ –≤—Å–ø–ª—ã–≤–∞—é—Ç –≤–æ–ø—Ä–æ—Å—ã
–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.

# –ú–µ—Ç–æ–¥—ã –æ–±—Ö–æ–¥–∞ –¥–µ—Ä–µ–≤—å–µ–≤

–í Visitor –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–æ—Ç–æ–º–∫–æ–≤ –∫–∞–∫–æ–≥–æ-–ª–∏–±–æ —É–∑–ª–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—Ä—É—á–Ω—É—é –≤—ã–∑—ã–≤–∞—Ç—å
–º–µ—Ç–æ–¥—ã –∏—Ö –æ–±—Ö–æ–¥–∞. –ü—Ä–∏ —ç—Ç–æ–º –µ—Å–ª–∏ —Ä–æ–¥–∏—Ç–µ–ª—å –∏–º–µ–µ—Ç —Ç—Ä–∏ –ø–æ—Ç–æ–º–∫–∞, –∏ –≤—ã–∑–≤–∞—Ç—å –º–µ—Ç–æ–¥—ã
—Ç–æ–ª—å–∫–æ –¥–ª—è –¥–≤—É—Ö —É–∑–ª–æ–≤, —Ç–æ —á–∞—Å—Ç—å –ø–æ–¥–¥–µ—Ä–µ–≤–∞ –≤–æ–æ–±—â–µ –Ω–µ –±—É–¥–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω–∞.
–í Listener (Walker) –∂–µ –º–µ—Ç–æ–¥—ã –ø–æ—Å–µ—â–µ–Ω–∏—è –≤—Å–µ—Ö –ø–æ—Ç–æ–º–∫–æ–≤ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.
–í Listener —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –º–µ—Ç–æ–¥, –≤—ã–∑—ã–≤–∞–µ–º—ã–π –≤ –Ω–∞—á–∞–ª–µ –ø–æ—Å–µ—â–µ–Ω–∏—è —É–∑–ª–∞ (`EnterNode`) –∏
–º–µ—Ç–æ–¥, –≤—ã–∑—ã–≤–∞–µ–º—ã–π –ø–æ—Å–ª–µ –ø–æ—Å–µ—â–µ–Ω–∏—è —É–∑–ª–∞ (`ExitNode`). –≠—Ç–∏ –º–µ—Ç–æ–¥—ã —Ç–∞–∫–∂–µ –º–æ–∂–Ω–æ
—Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å –ø–æ–º–æ—â—å—é –º–µ—Ö–∞–Ω–∏–∑–º–∞ —Å–æ–±—ã—Ç–∏–π. –ú–µ—Ç–æ–¥—ã Visitor, –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç Listener,
–º–æ–≥—É—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –æ–±—ä–µ–∫—Ç—ã –∏ –¥–∞–∂–µ –º–æ–≥—É—Ç –±—ã—Ç—å —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏, —Ç.–µ. –ø—Ä–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏–∏
`CSharpSyntaxVisitor` –∫–∞–∂–¥—ã–π –º–µ—Ç–æ–¥ Visit, –±—É–¥–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –æ–±—ä–µ–∫—Ç AstNode, –∫–æ—Ç–æ—Ä—ã–π
–≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ —è–≤–ª—è–µ—Ç—Å—è –æ–±—â–∏–º –ø—Ä–µ–¥–∫–æ–º –¥–ª—è –≤—Å–µ—Ö –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —É–∑–ª–æ–≤ AST.

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –ø–∞—Ç—Ç–µ—Ä–Ω–∞ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è Visitor, –∫–æ–¥
–ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –¥–µ—Ä–µ–≤–∞ –ø–æ–ª—É—á–∞–µ—Ç—Å—è –±–æ–ª–µ–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º –∏ –ª–∞–∫–æ–Ω–∏—á–Ω—ã–º –∑–∞ —Å—á–µ—Ç —Ç–æ–≥–æ,
—á—Ç–æ –≤ –Ω–µ–º –Ω–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Ö—Ä–∞–Ω–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ—Å–µ—â–µ–Ω–Ω—ã—Ö —É–∑–ª–∞—Ö. –ù–∞ —Ä–∏—Å—É–Ω–∫–µ
–Ω–∏–∂–µ –º–æ–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å, —á—Ç–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–∏ —è–∑—ã–∫–∞ PHP, –Ω–µ–Ω—É–∂–Ω—ã–µ —É–∑–ª—ã
HTML –∏ CSS –æ—Ç—Å–µ–∫–∞—é—Ç—Å—è. –ü–æ—Ä—è–¥–æ–∫ –æ–±—Ö–æ–¥–∞ –æ–±–æ–∑–Ω–∞—á–µ–Ω —á–∏—Å–ª–∞–º–∏. Listener –æ–±—ã—á–Ω–æ
–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä –∏–∑ —Ñ–∞–π–ª–æ–≤ —Ç–∏–ø–∞ CSV). –í –ø—Ä–∏–Ω—Ü–∏–ø–µ
–ª—é–±–æ–π Listener —è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç–Ω—ã–º —Å–ª—É—á–∞–µ–º –≤–∏–∑–∏—Ç–æ—Ä–∞, –ø–æ—ç—Ç–æ–º—É –Ω–∞ –Ω–µ–º —è –¥–∞–ª–µ–µ
–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å—Å—è –Ω–µ –±—É–¥—É.

![Visitor & Listener](https://habrastorage.org/files/bd1/69c/535/bd169c535e854f9681520f520d0db9c3.png)

# –†–µ–∞–ª–∏–∑–∞—Ü–∏–∏ Visitor

–ü–æ—Å–µ—Ç–∏—Ç–µ–ª–∏ –∏ —Å–ª—É—à–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–∞–ø–∏—Å–∞–Ω—ã –≤—Ä—É—á–Ω—É—é, —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã, –∞ —Ç–∞–∫–∂–µ
—Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω—ã —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ä–µ—Ñ–ª–µ–∫—Å–∏–∏ –∏ DLR, —Ç.–µ. –∫–ª—é—á–µ–≤–æ–≥–æ —Å–ª–æ–≤–∞ `dynamic`.

–ö–æ–¥, –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–π –≤—Ä—É—á–Ω—É—é, –æ–ø—è—Ç—å-—Ç–∞–∫–∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é –≥–∏–±–∫–æ—Å—Ç—å –∏
–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å. –û–¥–Ω–∞–∫–æ —Ä–∞–∑–º–µ—Ä –∏—Å—Ö–æ–¥–Ω–∏–∫–∞ –Ω–∞–ø—Ä—è–º—É—é –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞
—É–∑–ª–æ–≤ –≤ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º–æ–º –¥–µ—Ä–µ–≤–µ, –Ω—É –∏ —Ç–∞–∫–∏–µ –≤–∏–∑–∏—Ç–æ—Ä—ã –¥–æ–ª–≥–æ –∏ —É—Ç–æ–º–∏—Ç–µ–ª—å–Ω–æ —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å.
–ê —á–µ–º –±–æ–ª—å—à–µ –∫–æ–¥, —Ç–µ–º –ª–µ–≥—á–µ –≤ –Ω–µ–º –æ—à–∏–±–∏—Ç—å—Å—è. –ü—Ä–∏–º–µ—Ä –≤–∏–∑–∏—Ç–æ—Ä–∞ —Å –∫–æ–¥–æ–º, –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–º
–≤—Ä—É—á–Ω—É—é —è –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –Ω–µ –±—É–¥—É, –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ç—Ä–∏–≤–∏–∞–ª—å–Ω—ã–π.

–¢–∞–∫–∂–µ –≤–∏–∑–∏—Ç–æ—Ä—ã –º–æ–≥—É—Ç –±—ã—Ç—å –æ—á–µ–Ω—å –±—ã—Å—Ç—Ä–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã. –í ANTLR, –Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –∫–∞–∂–¥–æ–≥–æ
–ø—Ä–∞–≤–∏–ª–∞ –≥—Ä–∞–º–º–∞—Ç–∏–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ Visit. –û–¥–Ω–∞–∫–æ –Ω–µ –≤—Å–µ–≥–¥–∞ –µ—Å—Ç—å
–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏. –î—Ä—É–≥–∏–º –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–æ–º —è–≤–ª—è–µ—Ç—Å—è —Ç–æ, —á—Ç–æ –∫–æ–¥ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–æ—Å—Ç–µ–π
–≤–∏–∑–∏—Ç–æ—Ä–æ–≤ —Ö—É–∂–µ –≤–æ—Å–ø—Ä–∏–Ω–∏–º–∞–µ—Ç—Å—è, –∏–∑–±—ã—Ç–æ—á–Ω—ã–π, –∏ –º–æ–∂–µ—Ç –Ω–∞—Ä—É—à–∞—Ç—å –∫–∞–∫–æ–π-—Ç–æ
–ø—Ä–æ–µ–∫—Ç–Ω—ã–π Code Style. –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ —Å–ª–æ–≤–∞ –≤ –ø—Ä–∞–≤–∏–ª–∞—Ö —Ä–∞–∑–¥–µ–ª—è—é—Ç—Å—è —Å–∏–º–≤–æ–ª–∞–º–∏
–ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏—è, —Ç–æ –≤ –Ω–∞–∑–≤–∞–Ω–∏—è—Ö –º–µ—Ç–æ–¥–æ–≤ Visit —Ç–∞–∫–∂–µ –±—É–¥—É—Ç –Ω–µ–∫—Ä–∞—Å–∏–≤—ã–µ –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏—è.

# –î–∏—Å–ø–µ—Ç—á–µ—Ä–∏–∑–∞—Ü–∏—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ä–µ—Ñ–ª–µ–∫—Å–∏–∏ –∏ dynamic

–†–∞–∑—É–º–Ω—ã–º –∫–æ–º–ø—Ä–æ–º–∏—Å—Å–æ–º —è–≤–ª—è–µ—Ç—Å—è —Ç—Ä–µ—Ç–∏–π —Å–ø–æ—Å–æ–±, –∞ –∏–º–µ–Ω–Ω–æ, –≤–∏–∑–∏—Ç–æ—Ä —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º
—Ä–µ—Ñ–ª–µ–∫—Å–∏–∏ –∏ –∫–ª—é—á–µ–≤–æ–≥–æ —Å–ª–æ–≤–∞ `dynamic`. –û–±—Ö–æ–¥ –¥–µ—Ä–µ–≤—å–µ–≤ –∏ –¥—Ä—É–≥–∏—Ö –≥—Ä–∞—Ñ–æ–≤—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä,
–∫—Å—Ç–∞—Ç–∏, —è–≤–ª—è–µ—Ç—Å—è –Ω–∞–≥–ª—è–¥–Ω–æ–π –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–µ–π —Ç–æ–≥–æ, –≥–¥–µ –º–æ–∂–Ω–æ –ø—Ä–∏–º–µ–Ω—è—Ç—å —ç—Ç–æ —Å–ª–æ–≤–æ, –µ—Å–ª–∏ –¥–æ
—ç—Ç–æ–≥–æ –≤—ã –µ–≥–æ –Ω–∏–≥–¥–µ –Ω–µ –∏—Å–ø–æ–ª–∑–æ–≤–∞–ª–∏.

–°—É—Ç—å –¥–∞–Ω–Ω–æ–≥–æ —Å–ø–æ—Å–æ–±–∞ –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ –ª–æ–≥–∏–∫–∞ –æ–±—Ö–æ–¥–∞ —É–∑–ª–æ–≤ –ø–æ-—É–º–æ–ª—á–∞–Ω–∏—é
–ø—Ä–æ–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–µ –≤ –∫–∞–∂–¥–æ–º –º–µ—Ç–æ–¥–µ `Visit`, –∞ –≤ –æ–¥–Ω–æ–º –º–µ—Ç–æ–¥–µ –æ–±—Ö–æ–¥–∞ —É–∑–ª–æ–≤
–ø–æ-—É–º–æ–ª—á–∞–Ω–∏—é  `VisitChildren`, –∫–æ—Ç–æ—Ä—ã–π –∏–∑–≤–ª–µ–∫–∞–µ—Ç —Å–≤–æ–π—Å—Ç–≤–∞ –¥–ª—è –∫–∞–∂–¥–æ–π –Ω–æ–¥—ã –∏
–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç –∏—Ö –æ–±—Ö–æ–¥. –ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–º –º–æ–º–µ–Ω—Ç–æ–º —è–≤–ª—è–µ—Ç—Å—è –∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∏–∑–∞—Ü–∏—è
—Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `dynamic`. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤ —ç—Ç–æ–º –∫–æ–¥–µ DLR –æ–ø—Ä–µ–¥–µ–ª–∏—Ç –º–µ—Ç–æ–¥ `Visit`,
–∫–æ—Ç–æ—Ä—ã–π –Ω—É–∂–Ω–æ –ø–æ—Å–µ—Ç–∏—Ç—å –¥–ª—è –æ–±—ä–µ–∫—Ç–∞ `customNode`: `ExpressionStatement`,
`StringLiteral` –∏–ª–∏ –∫–∞–∫–∏–º-—Ç–æ –¥—Ä—É–≥–∏–º –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º.

```CSharp
// invocation in VisitChildren
Visit((dynamic)customNode);

// visit methods

public virtual T Visit(ExpressionStatement expressionStatement)
{
    return VisitChildren(expressionStatement);
}

public virtual T Visit(StringLiteral stringLiteral)
{
    return VisitChildren(stringLiteral);
}
```

–¢–∞–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –∫–∞–∫–∏–µ-—Ç–æ –ø—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é, –æ–¥–Ω–∞–∫–æ
—Ö–æ—Ä–æ—à–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –ø—Ä–æ—Ç–æ—Ç–∏–ø–æ–≤. –ú—ã –≤ Positive Technologies, –Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–µ–π—á–∞—Å
–∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç–∞–∫–∏–µ –≤–∏–∑–∏—Ç–æ—Ä—ã –ø—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–∞ –∫–æ–¥–∞ –Ω–∞
–æ—Å–Ω–æ–≤–µ –ø–æ—Ç–æ–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ Taint –¥–≤–∏–∂–∫–µ. –ü—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏
–≤ –ø—Ä–æ–µ–∫—Ç–µ [TreeProcessing.NET](https://github.com/KvanTTT/TreeProcessing.NET).

# –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Visitor

–ü–æ—Å–ª–µ–¥–Ω—è—è –≤–µ—â—å, –∫–æ—Ç–æ—Ä—É—é —è —Ö–æ—Ç–µ–ª –±—ã —É–ø–æ–º—è–Ω—É—Ç—å –æ –≤–∏–∑–∏—Ç–æ—Ä–µ - —ç—Ç–æ –∏—Ö —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è.
–ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–ª–∞—Å—Å–æ–≤-–≤–∏–∑–∏—Ç–æ—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –æ—Ç–≤–µ—á–∞—Ç—å –∑–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É
—Å–≤–æ–∏—Ö —É–∑–ª–æ–≤, –Ω–∞–ø—Ä–∏–º–µ—Ä, `Declaration`, `Expression`, `Statmement` –∏ –¥—Ä—É–≥–∏–µ.
–ê –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–¥–∏–Ω –±–æ–ª—å—à–æ–π –≤–∏–∑–∏—Ç–æ—Ä, –≤ –∫–æ—Ç–æ—Ä–æ–º –±—É–¥—É—Ç –ø—Ä–æ–ø–∏—Å–∞–Ω—ã –≤–∏–∑–∏—Ç–æ—Ä—ã
–¥–ª—è –≤—Å–µ—Ö —É–∑–ª–æ–≤.

–í Swiftify –º—ã —Å–Ω–∞—á–∞–ª–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –ø–µ—Ä–≤—ã–π –ø–æ–¥—Ö–æ–¥, –Ω–æ –ø–æ—Ç–æ–º –ø–µ—Ä–µ—à–ª–∏ –Ω–∞ –≤—Ç–æ—Ä–æ–π, —Ç.–∫.
—ç—Ç–æ –ø–æ–∑–≤–æ–ª–∏–ª–æ —É–ø—Ä–æ—Å—Ç–∏—Ç—å –∫–æ–¥ –∏ –∏–∑–±–∞–≤–∏—Ç—å—Å—è –æ—Ç –ª–∏—à–Ω–∏—Ö –∞–ª–ª–æ–∫–∞—Ü–∏–π –Ω–µ–Ω—É–∂–Ω—ã—Ö –≤–∏–∑–∏—Ç–æ—Ä–æ–≤.
–ö —Å—á–∞—Å—Ç—å—é, C# –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —á–∞—Å—Ç–∏—á–Ω—ã–µ –∫–ª–∞—Å—Å—ã, —á—Ç–æ –ø–æ–∑–≤–æ–ª–∏–ª–æ —Ä–∞–∑–±–∏—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é
—Ç–∞–∫–æ–≥–æ –≥–∏–≥–∞–Ω—Å–∫–æ–≥–æ –≤–∏–∑–∏—Ç–æ—Ä–∞ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ–∞–π–ª–æ–≤. –û–¥–Ω–∞–∫–æ –∏ –ø–µ—Ä–≤—ã–π –ø–æ–¥—Ö–æ–¥ –∏–º–µ–µ—Ç
—Å–≤–æ–∏ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å –µ–¥–∏–Ω—ã–º: –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –≤–∏–∑–∏—Ç–æ—Ä–∞ –º–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å
—Å–≤–æ–π –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–π —Ç–∏–ø. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤–∏–∑–∏—Ç–æ—Ä—ã –¥–ª—è –≤—ã—Ä–∞–∂–µ–Ω–∏–π –º–æ–≥—É—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –∫–∞–∫–∏–µ-—Ç–æ
–≤—ã—Ä–∞–∂–µ–Ω–∏—è, –≤–∏–∑–∏—Ç–æ—Ä –¥–ª—è –º–µ—Ç–æ–¥–æ–≤ –∏ –∫–ª–∞—Å—Å–æ–≤ –º–æ–∂–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –∏—Ö –¥–µ–∫–ª–∞—Ä–∞—Ü–∏–∏.
–û–¥–Ω–∞–∫–æ –¥–ª—è –Ω–∞—Å —ç—Ç–æ –æ–∫–∞–∑–∞–ª–æ—Å—å –Ω–µ –ø—Ä–∏–Ω—Ü–∏–ø–∏–∞–ª—å–Ω—ã–º, –ø–æ—Å–∫–æ–ª—å–∫—É –ø—Ä–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏–Ω–≥–µ
–∫–æ–¥–∞ –Ω–∞ –≤—ã—Ö–æ–¥–µ –≤—Å–µ–≥–¥–∞ –ø–æ–ª—É—á–∞–µ—Ç—Å—è —Å—Ç—Ä–æ–∫–∞.

–ë–æ–ª–µ–µ —Ç–æ–≥–æ —Ç–∞–∫–æ–π –≤–∏–∑–∏—Ç–æ—Ä –ø–æ–∑–≤–æ–ª–∏–ª –ª—É—á—à–µ —Ñ–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å –æ–±—Ö–æ–¥–∞ –¥–µ—Ä–µ–≤–∞,
—Ç.–∫. –≤ –Ω–µ–º –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –≤—Å–µ –º–µ—Ç–æ–¥—ã –∏ –¥–ª—è —É–∑–ª–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —Ç–æ—á–Ω–æ –Ω–µ –¥–æ–ª–∂–Ω—ã
–ø–æ—Å–µ—â–∞—Ç—å—Å—è, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∑–∞–≥–ª—É—à–∫–∞ `throw new ShouldNotBeVisitedException(context);`.

# C\# 7: –ª–æ–∫–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

–ö–∞–∫ –∏–∑–≤–µ—Å—Ç–Ω–æ, –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–µ–π C# —è–≤–ª—è–µ—Ç—Å—è 7. –í –Ω–µ–º –ø–æ—è–≤–∏–ª–æ—Å—å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ
–º–Ω–æ–≥–æ –Ω–æ–≤–æ–≤–≤–µ–¥–µ–Ω–∏–π, —Ç–∞–∫–∏—Ö –∫–∞–∫ out –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, Pattern Matching –≤ —Ç–æ–º —á–∏—Å–ª–µ –≤–∫–ª—é—á–∞—è is,
–∫–æ—Ä—Ç–µ–∂–∏, –ª–æ–∫–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏, —É–ª—É—á—à–µ–Ω–∏—è –∑–∞–ø–∏—Å–∏ –ª–∏—Ç–µ—Ä–∞–ª–æ–≤ –∏ –¥—Ä—É–≥–∏–µ —Ñ–∏—á–∏.

–ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ñ–∏—á–∏ –æ—á–µ–Ω—å –≤–æ—Å—Ç—Ä–µ–±–æ–≤–∞–Ω—ã –∏ –æ–Ω–∏ –æ–±–ª–µ–≥—á–∞—é—Ç –∑–∞–ø–∏—Å—å –∫–æ–¥–∞, –∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ
–¥—Ä—É–≥–∏—Ö –Ω–µ —Å–æ–≤—Å–µ–º –æ—á–µ–≤–∏–¥–Ω–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä, *–ª–æ–∫–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏*. –ù–∞ –º–æ–π –≤–∑–≥–ª—è–¥, —Ç–∞–∫–∏–µ
—Ñ—É–Ω–∫—Ü–∏–∏ –º–æ–∂–µ—Ç –∏ –Ω–µ —Ç–∞–∫ —Å–∏–ª—å–Ω–æ —Å–æ–∫—Ä–∞—â–∞—Ç –∑–∞–ø–∏—Å—å, –∑–∞—Ç–æ —Ö–æ—Ä–æ—à–æ –æ—Ä–≥–∞–Ω–∏–∑—É—é—Ç —Ä–µ–∫—É—Ä—Å–∏—é.
–£ —Ä–µ–∫—É—Ä—Å–∏–∏ –µ—Å—Ç—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏ –æ—Å–Ω–æ–≤–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ. –ù–∞ —ç—Ç–æ–º —Å–ª–∞–π–¥–µ –ø–æ–∫–∞–∑–∞–Ω
–∫–æ–¥ –º–µ—Ç–æ–¥–∞, –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ —Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω—ã—Ö —É–∑–ª–æ–≤ (–ª–∏—Å—Ç—å–µ–≤) –¥–ª—è –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–≥–æ —É–∑–ª–∞.
–ü—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è —Å–ø–∏—Å–æ–∫, –∞ –ø—Ä–∏ –æ–±—Ö–æ–¥–µ –æ–Ω –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è. –ë–µ–∑ –ª–æ–∫–∞–ª—å–Ω—ã—Ö
—Ñ—É–Ω–∫—Ü–∏–π –ø—Ä–∏—à–ª–æ—Å—å –±—ã –ø–∏—Å–∞—Ç—å –≤—Ç–æ—Ä—É—é —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Å—å –±—ã —Ç–æ–ª—å–∫–æ –≤ —ç—Ç–æ–º
–º–µ—Å—Ç–µ.

```CSharp
public static List<Terminal> GetLeafs(this Rule node)
{
    var result = new List<Terminal>();
    GetLeafs(node, result);

    // Local function
    void GetLeafs(Rule localNode, List<Terminal> localResult)
    {
        for (int i = 0; i < localNode.ChildCount; ++i)
        {
            IParseTree child = localNode.GetChild(i);
            // Is expression
            if (child is TerminalNode typedChild)
                localResult.Add(typedChild);
            GetLeafs(child, localResult);
        }
    }
    return result;
}
```

–ö–æ–Ω–µ—á–Ω–æ –≤ C# –¥–∞–≤–Ω–æ —É–∂–µ –µ—Å—Ç—å –∏ –ª—è–º–±–¥–∞ —Ñ—É–Ω–∫—Ü–∏–∏, –æ–¥–Ω–∞–∫–æ –æ–Ω–∏ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑
–¥–µ–ª–µ–≥–∞—Ç, –∞ –∑–Ω–∞—á–∏—Ç –º–µ–Ω–µ–µ –±—ã—Å—Ç—Ä—ã–µ. –¢–∞–∫–∂–µ –æ–Ω–∏ –Ω–µ –º–æ–≥—É—Ç –±—ã—Ç—å —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã–º–∏,
generic –∏ –≤ –∫–æ–Ω—Ü–µ –∫–æ–Ω—Ü–æ–≤ –∫–æ–¥ —Å –Ω–∏–º–∏ —Ö—É–∂–µ –≤—ã–≥–ª—è–¥—è—Ç.

<!-- TODO: ‚å® –ü—Ä–∏–º–µ—Ä —Å –¥–≤—É–º—è —Ñ—É–Ω–∫—Ü–∏—è–º–∏, –ª–æ–∫–∞–ª—å–Ω–æ–π –∏ –¥–µ–ª–µ–≥–∞—Ç–∞–º–∏ -->

# –°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è

–§–æ—Ä–º–∞—Ç—ã —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –±—ã–≤–∞—é—Ç —Å–ª–µ–¥—É—é—â–∏–º–∏:

* –ë–∏–Ω–∞—Ä–Ω–∞—è
* XML, JSON, YAML –∏ –¥—Ä—É–≥–∏–µ —è–∑—ã–∫–∏ —Ä–∞–∑–º–µ—Ç–∫–∏
* –°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç

–ö–∞–∫ –∏–∑–≤–µ—Å—Ç–Ω–æ, –±–∏–Ω–∞—Ä–Ω–∞—è —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ—á–µ–Ω—å –±—ã—Å—Ç—Ä–∞—è, –Ω–æ —Ñ–æ—Ä–º–∞—Ç –Ω–µ—á–∏—Ç–∞–µ–º –¥–ª—è —á–µ–ª–æ–≤–µ–∫–∞.
XML –∏ Json —Ñ–æ—Ä–º–∞—Ç—ã –Ω–∞–æ–±–æ—Ä–æ—Ç, —É–¥–æ–±–Ω—ã –¥–ª—è —á—Ç–µ–Ω–∏—è –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –æ–¥–Ω–∞–∫–æ –æ—Ç—Å—Ç–∞—é—Ç
–ø–æ —Å–∫–æ—Ä–æ—Å—Ç–∏ –æ—Ç –±–∏–Ω–∞—Ä–Ω–æ–π. –ü–æ–¥ .NET —Å—É—â–µ—Å—Ç–≤—É—Ç–µ –±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∏–±–ª–∏–æ—Ç–µ–∫
—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏, —Ç–∞–∫–∏–µ –∫–∞–∫ Protobuf, MessagePack, Json.NET, –∞ —Ç–∞–∫–∂–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ
–≤–æ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫. –ü–æ–¥—Ä–æ–±–Ω–æ —è –Ω–∞ –Ω–∏—Ö –æ—Å—Ç–∞–Ω–∞–ª–≤–∏–≤–∞—Ç—å—Å—è –Ω–µ –±—É–¥—É, –æ–¥–Ω–∞–∫–æ –ø–æ–¥–µ–ª—é—Å—å —Å—Å—ã–ª–∫–æ–π
–Ω–∞ –Ω–µ–¥–æ–ø–∏—Å–∞–Ω–Ω—É—é —Å 2015 —Å—Ç–∞—Ç—å—é, –≤ –∫–æ—Ç–æ—Ä–æ–π –ø–æ–¥—Ä–æ–±–Ω–æ —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç—Å—è —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è
–¥—Ä–µ–≤–æ–≤–∏–¥–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä –∏ –¥—Ä—É–≥–∏–µ –≤–µ—â–∏: [–°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è, –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ, —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –∏ –æ–±—Ö–æ–¥ –¥—Ä–µ–≤–æ–≤–∏–¥–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä –≤ .NET](https://github.com/KvanTTT/Articles/blob/tree-structures-serialization-comparison-and-mapping-on-net/Tree-Structures-Serialization-Comparison-and-Mapping-on-NET/Russian.md).
–ê —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –≤—ã—à–µ—É–ø–æ–º—è–Ω—É—Ç–æ–º –ø—Ä–æ–µ–∫—Ç–µ [TreeProcessing.NET](https://github.com/KvanTTT/TreeProcessing.NET).

–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –Ω–µ –≤—Å–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ —É–º–µ—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –¥–µ—Ä–µ–≤—å—è–º–∏ –∏–∑ –∫–æ—Ä–æ–±–∫–∏ –∏ –∏–Ω–æ–≥–¥–∞
—Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–æ—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–ø–∏–ª—å–Ω–∏–∫–æ–º, —á—Ç–æ–±—ã —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤–æ–æ–±—â–µ —Ä–∞–±–æ—Ç–∞–ª–∞, —Ä–µ–∑—É–ª—å—Ç–∞—Ç
–±—ã–ª –Ω–µ–∑–∞–≤–∏—Å–∏–º –æ—Ç —Ä–∞–Ω—Ç–∞–π–º–∞ –∏ –±—ã–ª –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø—Ä–∏—è—Ç–µ–Ω –¥–ª—è —á–µ–ª–æ–≤–µ–∫–∞.

# JSON —Å–µ—Ä–∏–∞–ª–∑–∏–∞—Ü–∏—è –¥–µ—Ä–µ–≤—å–µ–≤

–Ø —Ä–∞—Å—Å–∫–∞–∂—É –æ —Ç–æ–º, –∫–∞–∫ –º—ã –ø—Ä–∏—Ä—É—á–∏–ª–∏ –ø–æ–ø—É–ª—è—Ä–Ω—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É Json.NET –¥–ª—è —Ç–∞–∫–æ–≥–æ
–≤—ã–≤–æ–¥–∞. –î–µ–ª–æ –≤ —Ç–æ–º, —á—Ç–æ –µ—Å–ª–∏ —Å–≤–æ–π—Å—Ç–≤–æ –∏–º–µ–µ—Ç –∞–±—Å—Ç—Ä–∞—Ç–Ω—ã–π –∫–ª–∞—Å—Å, –∫–æ—Ç–æ—Ä—ã–π
–∫–æ–Ω–∫—Ä–µ—Ç–∏–∑–∏—Ä—É–µ—Ç—Å—è –≤–æ –≤—Ä–µ–º—è –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è, –Ω–æ, –ø–æ–Ω—è—Ç–Ω–æ–µ –¥–µ–ª–æ, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å
–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± —ç—Ç–æ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º —Ç–∏–ø–µ –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–π –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏.
–ù–∞–ø—Ä–∏–º–µ—Ä, —Å–≤–æ–π—Å—Ç–≤–æ `Expression` –º–æ–∂–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å—Å—è `BinaryOperatorExpression`
–∏–ª–∏ `StringLiteral`. Json.NET –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∏–∑ –∫–æ—Ä–æ–±–∫–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä `TypeNameHandling.All`
–¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç–∏–ø–æ–≤, –æ–¥–Ω–∞–∫–æ —Ä–µ–∑—É–ª—å—Ç–∏—Ä—É—é—â–∏–π JSON –≤—ã–≥–ª—è–¥–∏—Ç –º–Ω–æ–≥–æ—Å–ª–æ–≤–Ω—ã–º –∏ –∑–∞–≤–∏—Å–∏–º—ã–º
–æ—Ç —Ä–∞–Ω—Ç–∞–π–º–∞ (—Ç.–µ. `System.Collections.Generic.List` - –¥–æ—Ç–Ω–µ—Ç–æ–≤—Å–∫–∞—è —Å—É—â–Ω–æ—Å—Ç—å).

```JSON
"Statements": {
    "$type": "System.Collections.Generic.List`1[[TreesProcessing.NET.Statement, TreesProcessing.NET]], mscorlib",
    "$values": [
        ...
    ]
```

# –°–≤–æ—è –ª–æ–≥–∏–∫–∞ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Å JsonConverter

–ö —Å—á–∞—Å—Ç—å—é, Json.NET –ø–æ–¥–¥–µ—Ä–∏–∂–∏–≤–∞–µ—Ç –∫–ª–∞—Å—Å, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å
–ª–æ–≥–∏–∫—É —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —É–∑–ª–æ–≤, `JsonConverter`.

–í –∫–∞—á–µ—Å—Ç–≤–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞ —Ç–∏–ø–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∫ —Å–∞–º–æ
–∏–º—è –∫–ª–∞—Å—Å–∞, —Ç–∞–∫ –∏ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ –∏–ª–∏ –∞—Ç—Ç—Ä–∏–±—É—Ç.
–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º –ø–ª—é—Å–æ–º Enum —Å–≤–æ–π—Å—Ç–≤–∞ —è–≤–ª—è–µ—Ç—Å—è —Ç–æ, —á—Ç–æ –µ–≥–æ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ
—Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏, –Ω–æ –∏ –¥–ª—è –±–æ–ª–µ–µ –±—ã—Å—Ç—Ä–æ–≥–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –¥–≤—É—Ö —É–∑–ª–æ–≤ –±–µ–∑
–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ –ø—Ä–∏–≤–µ–¥–µ–Ω–∏—è, —á—Ç–æ —Ç–∞–∫–∂–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å.

* **–ò–º—è –∫–ª–∞—Å—Å–∞** –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Ç–∏–ø–∞
  ```CSharp
  BinaryOperatorExpression
  ```
* **–°–≤–æ–π—Å—Ç–≤–æ** –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Ç–∏–ø–∞
  ```CSharp
  override NodeType NodeType => NodeType.InvocationExpression;
  ```
* **–ê—Ç—Ç—Ä–∏–±—É—Ç** –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Ç–∏–ø–∞
  ```CSharp
  [NodeAttr(NodeType.BinaryOperatorExpression)]
  public class BinaryOperatorExpression : Expression
  ```

–ü—Ä–∏ –¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `Activator`, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–∑–¥–∞–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π
–≤ —Å–±–æ—Ä–∫–µ –∫–ª–∞—Å—Å –ø–æ –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–π —Å—Ç—Ä–æ–∫–µ.

–†–µ–∑—É–ª—å—Ç–∏—Ä—É—é—â–∏–π JSON –ø—Ä–∏ —Ç–∞–∫–æ–º –ø–æ–¥—Ö–æ–¥–µ –≤—ã–≥–ª—è–¥–∏—Ç –ø–æ–∫–æ—Ä–æ—á–µ:

```JSON
"Statements": {
    "NodeType": "BlockStatement",
    "Statements": [
        ...
    ]
```

# –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è (Swiftify)

–ü—Ä–∏ –æ–±—Ö–æ–¥–µ –¥–µ—Ä–µ–≤—å–µ–≤ —á–∞—Å—Ç–æ –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ –æ–¥–Ω–∏–º —É–∑–ª–∞–º –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑.
–•–æ—Ä–æ—à–æ, –µ—Å–ª–∏ —ç—Ç–∏ —É–∑–ª—ã - –±–ª–∏–∂–∞–π—à–∏–µ, —Ç.–µ. –¥–µ—Ç–∏ –∏–ª–∏ —Ä–æ–¥–∏—Ç–µ–ª–∏. –û–¥–Ω–∞–∫–æ –µ—Å–ª–∏ —É–∑–µ–ª
—Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–∫–æ–ª–µ–Ω–∏–π, –¥–∞ –µ—â–µ –∏ –∏—â–µ—Ç—Å—è –ø–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–º—É —É—Å–ª–æ–≤–∏—é,
—Ç–æ –±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—Ä–∞—â–µ–Ω–∏–π –∫ –Ω–∏–º—É –º–æ–∂–µ—Ç –ø–æ–≤–ª–µ—á—å –ø—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é,
–æ—Å–æ–±–µ–Ω–Ω–æ –µ—Å–ª–∏ —Ñ–∞–π–ª –±–æ–ª—å—à–æ–π. –î–ª—è —Ä–µ—à–µ–Ω–∏—è —ç—Ç–∏—Ö –ø—Ä–æ–±–ª–µ–º –º–æ–∂–Ω–æ –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å
–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ—Å–µ—â–µ–Ω–Ω—ã—Ö —Ä–∞–Ω–µ–µ —É–∑–ª–∞—Ö –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –≤ –¥–∞–ª—å–Ω–µ–π—à–∏–º. –¢–∞–∫–æ–π
–ø—Ä–∏–º–µ–º –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è **–º–µ–º–æ–∏–∑–∞—Ü–∏–µ–π**.

–í Swiftify —É –Ω–∞—Å –µ—Å—Ç—å –º–µ—Ç–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–µ—Ä–≤–æ–≥–æ –ø–æ—Ç–æ–º–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ
—Ç–∏–ø–∞ `FirstDescendantOfType`. –ü–æ—Å–ª–µ –∑–∞–ø–∏—Å–∏ —Å–ø–∏—Å–∫–∞ –Ω–∞—Å–ª–µ–¥–Ω–∏–∫–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ
—É–∑–ª–∞ —É–¥–∞–ª–æ—Å—å –¥–æ–±–∏—Ç—å—Å—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –±–æ–ª–µ–µ —á–µ–º –≤ –¥–≤–∞ —Ä–∞–∑–∞ –¥–ª—è
–±–æ–ª—å—à–æ–≥–æ —Ñ–∞–π–ª–∞. –û–¥–Ω–∞–∫–æ –Ω–∏—á–µ–≥–æ –Ω–µ –±—ã–≤–∞–µ—Ç –±–µ—Å–ø–ª–∞—Ç–Ω—ã–º: –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏
–≤–æ–∑—Ä–æ—Å–ª–æ –ø—Ä–∏–º–µ—Ä–Ω–æ –≤ 3 —Ä–∞–∑–∞. –í –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏ –≤—Å–µ —Ä–∞–≤–Ω–æ
–±—ã–ª–æ –Ω–µ–±–æ–ª—å—à–∏–º, —Ç–∞–∫ —á—Ç–æ —ç—Ç–æ –æ–∫–∞–∑–∞–ª–æ—Å—å –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–µ–π.

–¢–∞–∫–∂–µ —Ü–µ–ª–µ—Å–æ–æ–±—Ä–∞–∑–Ω–æ –∏–∑–±–∞–≤–ª—è—Ç—å—Å—è –æ—Ç –∞–ª–ª–æ–∫–∞—Ü–∏–π –æ–±—ä–µ–∫—Ç–æ–≤ –≤ –º–µ—Ç–æ–¥–∞—Ö, –∫–æ—Ç–æ—Ä—ã–µ
—á–∞—Å—Ç–æ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è. –£ –Ω–∞—Å —Ç–∞–∫–∏—Ö –º–µ—Ç–æ–¥–æ–º —è–≤–ª—è–µ—Ç—Å—è `Visit`: –æ–Ω –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è
–ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —É–∑–ª–∞ –¥–µ—Ä–µ–≤–∞ —Ä–∞–∑–±–æ—Ä–∞, —Ç.–∫. —Å–æ–¥–µ—Ä–∂–∏—Ç –≤ —Å–µ–±–µ –ª–æ–≥–∏–∫—É
–æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–∫—Ä—ã—Ç—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤, –∞ —Ç–∞–∫–∂–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏—Å–∫–ª—é—á–µ–Ω–∏–π. –†–∞–Ω—å—à–µ —Ç–∞–º –≤—Å–µ–≥–¥–∞
—Å–æ–∑–¥–∞–≤–∞–ª—Å—è `StringBuilder`, –¥–∞–∂–µ –µ—Å–ª–∏ child –±—ã–ª –æ–¥–∏–Ω. –ù—É —Ç.–µ. –ø–æ–Ω—è—Ç–Ω–æ, —á—Ç–æ –º–æ–∂–Ω–æ
—Å—Ä–∞–∑—É –µ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å. –î–∞–Ω–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ç–æ–∂–µ –Ω–µ–º–Ω–æ–≥–æ —É–º–µ–Ω—å—à–∏–ª–∞
–ø–æ—Ç—Ä–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏ –∏ —É—Å–∫–æ—Ä–∏–ª–∞ —Å–∫–æ—Ä–æ—Å—Ç—å.

# –†–µ—Å—É—Ä—Å—ã

–Ø –∑–∞–∫–∞–Ω—á–∏–≤–∞—é –¥–æ–∫–ª–∞–¥. –ù–∞ —ç—Ç–æ–º —Å–ª–∞–π–¥–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω —Å–ø–∏—Å–æ–∫ —Ä–µ—Å—É—Ä—Å–æ–≤, –Ω–∞ –æ—Å–Ω–æ–≤–µ
–∫–æ—Ç–æ—Ä—ã—Ö –≥–æ—Ç–æ–≤–∏–ª—Å—è –º–∞—Ç–µ—Ä–∏–∞–ª. –ö–∞–∫ —è —É–∂–µ –≥–æ–≤–æ—Ä–∏–ª, –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –≤—Å–µ –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏
–Ω–∞ –≥–∏—Ç—Ö–∞–±–µ –ø–æ–¥ –ø–µ—Ä–º–∏—Å—Å–∏–≤–Ω—ã–º–∏ –ª–∏—Ü–µ–Ω–∏–∑—è–º–∏, –∞ —Å–∞–º–∞ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è —Ç–∞–∫–∂–µ –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–∞–º.

–í–æ–æ–±—â–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É—é –ø–∏—Å–∞—Ç—å –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏ —Ç–∞–∫–∂–µ –≤ markdown —Ñ–æ—Ä–º–∞—Ç–µ.

# –í–æ–ø—Ä–æ—Å—ã?

–¢–µ–ø–µ—Ä—å —è –≥–æ—Ç–æ–≤ –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –≤–∞—à–∏ –≤–æ–ø—Ä–æ—Å—ã.
<!-- –û—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã-->